{"version":3,"sources":["localState/index.ts","App.tsx","ApolloProvider.tsx","components/atoms/ArticleTitle.tsx","components/molecules/ArticleHeader.tsx","components/molecules/LoadingScreen.tsx","components/molecules/LoadedScreen.tsx","components/organisms/ArticleDetails.tsx","components/atoms/ArticleListItem.tsx","components/molecules/ArticleListSearch.tsx","components/atoms/PlotTooltip.tsx","components/molecules/ScatterPlot.tsx","components/molecules/LinePlot.tsx","components/organisms/PlotArea.tsx","components/molecules/ArticleListDatabase.tsx","components/atoms/ArticleSearchItem.tsx","components/atoms/ArticleSearchMenu.tsx","components/molecules/ArticleSearchPanel.tsx","components/molecules/DatabaseFooter.tsx","types/Article.ts","utils/index.ts","components/molecules/SearchFooter.tsx","components/organisms/Sidebar.tsx","components/templates/Index.tsx","images/github.png","pages/Index.tsx","reportWebVitals.ts","index.tsx"],"names":["articlesSearchedVar","makeVar","selectedArticlesOnSearchVar","queryForArticleSearchVar","articlesFetchedVar","selectedArticlesOnDatabaseVar","queryForArticleFetchVar","selectedFilterVar","currentIndexVar","plotLaunchVar","paramKVar","isLoadingVar","main","articleListDatabase","articleDetails","fetchOptionAuthor","fetchOptionJournal","fetchOptionTag","plot","search","isDarkVar","fields","selectedArticlesOnSearch","read","articlesSearched","queryForArticleSearch","selectedArticlesOnDatabase","articlesFetched","queryForArticleFetch","currentIndex","plotLaunch","paramK","selectedFilter","hot","module","dotenv","config","isDark","useReactiveVar","theme","darkTheme","defaultTheme","cache","InMemoryCache","resultCaching","typePolicies","Query","link","HttpLink","uri","client","ApolloClient","resolvers","ApolloProvider","props","children","ArticleTitle","alignSelf","level","margin","text","ArticleHeader","length","current","alignContent","justifyContent","name","gap","width","onPressEnd","isDisabled","LoadingScreen","useState","inTransition","setInTransition","useEffect","loading","motion","div","animate","display","opacity","initial","height","dimension","position","isIndeterminate","size","aria-label","LoadedScreen","useMeasure","ref","style","top","left","zIndex","defaultValue","getArticleDetails","gql","onClick","type","item","id","articles","map","ArticleDetails","_props","selectedArticles","data","useQuery","variables","where","onCompleted","setTimeout","isLoading","article","setArticle","multipleArticles","rows","columns","columnGap","rowGap","UNSAFE_style","overflowY","marginTop","marginBottom","fontWeight","textAlign","authors","journal","split","capitalize","join","Date","date","toLocaleDateString","wrap","tags","citation","abstract","color","defaultProps","ArticleListItem","status","backgroundColor","undefined","hexToRgba","schemeSet2","selected","xor","getArticleListSearch","options","a","Object","values","filter","core","author","toLowerCase","title","tag","replace","Axios","get","params","expr","count","attributes","process","entities","IA","FamId","Id","sort","b","DN","ArticleListSearch","list","selectedList","set","then","href","target","rel","includes","PlotTooltip","find","articleId","minHeight","padding","textOverflow","ScatterPlot","hovered","setHovered","plotData","customNode","highlightIndex","node","x","y","blendMode","onMouseEnter","onMouseMove","onMouseLeave","transform","points","fill","mixBlendMode","r","createCustomNode","right","bottom","xScale","min","range","xMin","max","xMax","yScale","yMin","yMax","axisBottom","legend","Math","round","prl","legendPosition","legendOffset","axisLeft","nodeSize","colors","scheme","tooltip","textColor","renderNode","LinePlot","index","useMesh","usePlotData","value","setValue","currentLaunch","setcurrentLaunch","axios","post","k","response","fetch","PlotArea","areas","gridArea","getArticles","ArticleListDatabase","articleList","array","intersection","reduce","prev","curr","colorArray","item2","cat","flat","getIcon","ArticleSearchField","setText","timeout","clearTimeout","alignItems","label","toUpperCase","onChange","e","icon","ArticleSearchMenu","setArray","isOpen","setIsOpen","key","onMenuOpen","onMenuClose","onKeyDown","event","code","preventDefault","neutral0","neutral5","neutral10","neutral20","neutral30","neutral70","neutral80","neutral90","primary25","full","ArticleSearchPanel","deleteSelectedArticlesOnDatabase","mutation","toString","differenceBy","deleteArticles","DatabaseFooter","useMutation","variant","minValue","maxValue","createAbstract","invertedAbstract","strArray","Array","IndexLength","entries","InvertedIndex","slice","internalTemporalToInternalPermanent","articlesInternal","abstractTextArray","createEmbedding","abstractEmbeddingArray","abstractEmbedding","embedded","filteredArray","articlesExternal","uniqBy","internalArrayTemporal","D","CC","AA","AuId","DAuN","F","FId","DFN","J","JId","JN","unionBy","internalArrayPermanent","mutationArray","converted","toISOString","connectOrCreate","create","i","element","upsertOneArticle","SearchFooter","delay","isQuiet","Sidebar","direction","IndexTemplate","windowSize","useWindowSize","marginStart","isSelected","cursor","window","open","alt","src","overflow","orientation","minmax","Index","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","document","getElementById"],"mappings":"iGAAA,scAsBaA,EAAsBC,kBAA2B,IACjDC,EAA8BD,kBAAkB,IAChDE,EAA2BF,kBAAsB,IAEjDG,EAAqBH,kBAA2B,IAChDI,EAAgCJ,kBAAkB,IAClDK,EAA0BL,kBAAqB,IAC/CM,EAAoBN,kBAAwB,IAE5CO,EAAkBP,kBAAgB,GAClCQ,EAAgBR,kBAAgB,GAEhCS,EAAYT,kBAAgB,GAE5BU,EAAeV,kBAAsC,CAChEW,MAAM,EACNC,qBAAqB,EACrBC,gBAAgB,EAChBC,mBAAmB,EACnBC,oBAAoB,EACpBC,gBAAgB,EAChBC,MAAM,EACNC,QAAQ,IAGGC,EAAYnB,mBAAiB,GAE7BoB,EAAS,CACpBC,yBAA0B,CACxBC,KADwB,WAEtB,OAAOrB,MAGXsB,iBAAkB,CAChBD,KADgB,WAEd,OAAOvB,MAGXyB,sBAAuB,CACrBF,KADqB,WAEnB,OAAOpB,MAGXuB,2BAA4B,CAC1BH,KAD0B,WAExB,OAAOlB,MAGXsB,gBAAiB,CACfJ,KADe,WAEb,OAAOnB,MAGXwB,qBAAsB,CACpBL,KADoB,WAElB,OAAOjB,MAGXuB,aAAc,CACZN,KADY,WAEV,OAAOf,MAGXsB,WAAY,CACVP,KADU,WAER,OAAOd,MAGXsB,OAAQ,CACNR,KADM,WAEJ,OAAOb,MAGXsB,eAAgB,CACdT,KADc,WAEZ,OAAOhB,Q,kCCjGb,0HAwBe0B,kBAAIC,EAAJD,EAbf,WACEE,IAAOC,SAEP,IAAMC,EAASC,yBAAelB,KAC9B,OACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAUmB,MAAOF,EAASG,IAAYC,IAAtC,SACE,cAAC,IAAD,a,uDClBR,oEAYMC,EAAQ,IAAIC,gBAAc,CAC9BC,eAAe,EACfC,aAAc,CACZC,MAAO,CACLzB,eAIA0B,EAAO,IAAIC,WAAS,CACxBC,IAAK,gDAGDC,EAA8C,IAAIC,eAAa,CACnET,QACAU,UAAW,GACXL,SAGWM,EAAgD,SAC3DC,GAEA,OAAO,cAAC,iBAAD,CAAUJ,OAAQA,EAAlB,SAA2BI,EAAMC,a,oQC5B7BC,EAA4C,SACvDF,GAEA,OACE,cAAC,IAAD,CAAMG,UAAW,SAAjB,SACE,cAAC,IAAD,CAASC,MAAO,EAAGC,OAAQ,SAA3B,SACGL,EAAMM,UCIFC,EAA8C,SACzDP,GAEA,IAAMQ,EAASzD,cAAgCyD,OACzCC,EAAUzB,yBAAe9B,KAC/B,OACE,eAAC,IAAD,CAAMwD,aAAc,WAAYC,eAAgB,gBAAhD,UACE,cAAC,EAAD,CAAcL,KAAMN,EAAMY,OAC1B,eAAC,IAAD,CAAMT,UAAW,SAAUU,IAAK,WAAhC,UACE,cAAC,IAAD,CACEC,MAAO,WACPC,WAAY,kBAAM7D,YAAgBuD,EAAU,IAC5CO,WAAwB,IAAZP,EAHd,SAKE,cAAC,IAAD,MAEF,cAAC,IAAD,CAAMN,UAAW,SAAUW,MAAO,WAAYH,eAAgB,SAA9D,SACE,eAAC,IAAD,WACGF,EAAU,EADb,MACmBD,OAGrB,cAAC,IAAD,CACEM,MAAO,WACPC,WAAY,kBAAM7D,YAAgBuD,EAAU,IAC5CO,WAAYR,EAAS,IAAMC,EAH7B,SAKE,cAAC,IAAD,a,2BCvBGQ,EAA8C,SACzDjB,GACI,IAAD,EACqCkB,oBAAS,GAD9C,mBACIC,EADJ,KACkBC,EADlB,KAWH,OARAC,qBAAU,WACHrB,EAAMsB,QAGTF,GAAgB,GAFhBA,GAAgB,KAIjB,CAACpB,EAAMsB,UAGR,cAACC,EAAA,EAAOC,IAAR,CACEC,QAAS,CACPC,QAASP,EAAe,OAAS,QACjCQ,QAAS3B,EAAMsB,QAAU,EAAI,GAE/BM,QAAS,CACPD,QAAS,EACTD,QAAS,SAPb,SAUE,cAAC,IAAD,CACEG,OAAQ7B,EAAM8B,UAAUD,OACxBf,MAAOd,EAAM8B,UAAUhB,MACvBJ,aAAc,SACdC,eAAgB,SAChBoB,SAAU,WALZ,SAOE,eAAC,IAAD,WACE,cAAC,IAAD,CACEC,iBAAe,EACfC,KAAMjC,EAAMiC,MAAQ,IACpBC,aAAW,eAEb,cAAC,IAAD,iCCrCGC,EAA4C,SACvDnC,GACI,IAAD,EACsBoC,cADtB,mBACIC,EADJ,KACSP,EADT,KAEH,OACE,eAAC,IAAD,CAAMC,SAAU,WAAYF,OAAQ,OAApC,UACE,cAACN,EAAA,EAAOC,IAAR,CACEa,IAAKA,EACLC,MAAO,CACLP,SAAU,WACVQ,IAAK,EACLC,KAAM,EACN1B,MAAO,OACPe,OAAQ,OACRY,OAAQ,IAEVhB,QAAS,CACPE,WAAY3B,EAAMsB,QAAU,EAAI,GAAK,IAEvCM,QAAS,CACPD,QAAS,GAdb,SAiBG3B,EAAMC,WAET,cAAC,IAAD,CACE8B,SAAU,WACVQ,IAAK,EACLC,KAAM,EACN1B,MAAO,OACPe,OAAQ,OACRY,OAAQ,EANV,SAQE,cAAC,EAAD,CACEnB,QAAStB,EAAMsB,QACfQ,UAAWA,EACXG,KAAMjC,EAAMiC,aC1BTS,EAET,GAOEC,EAAoBC,cAAH,8cAiCjBC,EAAU,SAACC,EAAcC,GAC7B9F,YAAkB,2BAAKA,eAAN,kBAA4B6F,EAAOC,EAAKC,MACzDhG,YAAwB,2BACnBA,eADkB,kBAEpB8F,EAAOC,EAAKE,SAASC,KAAI,SAACH,GAAD,OAAeA,EAAKC,UAIrCG,EAAsC,SAACC,GAClD,IACMC,EAAmBrE,yBAAejC,KAChCuG,EAASC,mBAASZ,EAAmB,CAC3Ca,UAAW,CACTC,MAAOJ,GAETK,YAAa,WACXxG,YAAgBmG,EAAiB7C,OAAS,GAC1CmD,YACE,kBAAMtG,YAAa,2BAAKA,eAAN,IAAsBG,gBAAgB,OACxD,QARE8F,KAYFM,EAAY5E,yBAAe3B,KAAf,eACZoD,EAAUzB,yBAAe9B,KAhByC,EAkB1CgE,mBAAiC,MAlBS,mBAkBjE2C,EAlBiE,KAkBxDC,EAlBwD,KAoCxE,OAhBAzC,qBAAU,WACRhE,YAAa,2BACRA,eADO,IAEVG,eAA4C,IAA5B6F,EAAiB7C,YAElC,CAAC6C,IAEJhC,qBAAU,WACJiC,IACFQ,EAAWR,EAAKS,iBAAiBtD,IAC7BpD,cAAY,qBACdA,YAAa,2BAAKA,eAAN,IAAsBE,qBAAqB,QAG1D,CAACkD,EAAS6C,IAGX,cAAC,EAAD,CAAchC,QAASsC,EAAvB,SACE,cAAC,IAAD,CAAM/B,OAAQ,OAAd,SACGgC,EACC,eAAC,IAAD,CAAMG,KAAM,CAAC,WAAY,SAAU,QAASlD,MAAO,OAAnD,UACE,cAAC,EAAD,eAAmB+C,IACnB,cAAC,IAAD,CAAS5B,KAAM,MACf,cAAC,IAAD,UACE,eAAC,IAAD,CACEgC,QAAS,CAAC,YAAa,QACvBC,UAAW,WACXC,OAAQ,WACRC,aAAc,CAAEC,UAAW,UAC3BC,UAAW,WACXC,aAAc,WANhB,UAQE,cAAC,IAAD,CACEpE,UAAW,SACXiE,aAAc,CAAEI,WAAY,IAAKC,UAAW,SAF9C,iBAMA,cAAC,IAAD,UAAOZ,EAAQb,KACf,cAAC,IAAD,CACE7C,UAAW,SACXiE,aAAc,CAAEI,WAAY,IAAKC,UAAW,SAF9C,sBAMA,cAAC,IAAD,CAAM5D,IAAK,UAAX,SACGgD,EAAQa,QAAQxB,KAAI,SAACH,GAAD,OACnB,cAAC,IAAD,CAAchC,WAAY,kBAAM8B,EAAQ,SAAUE,IAAlD,SACGA,EAAKnC,YAIXiD,EAAQc,QACP,qCACE,cAAC,IAAD,CACExE,UAAW,SACXiE,aAAc,CAAEI,WAAY,IAAKC,UAAW,SAF9C,sBAMA,cAAC,IAAD,UACE,cAAC,IAAD,CACE1D,WAAY,kBAAM8B,EAAQ,UAAWgB,EAAQc,UAD/C,SAGGd,EAAQc,QAAQ/D,KACdgE,MAAM,KACN1B,KAAI,SAACH,GAAD,OAAkB8B,qBAAW9B,MACjC+B,KAAK,YAIZ,KACJ,cAAC,IAAD,CACE3E,UAAW,SACXiE,aAAc,CAAEI,WAAY,IAAKC,UAAW,SAF9C,2BAMA,cAAC,IAAD,UAAO,IAAIM,KAAKlB,EAAQmB,MAAMC,uBAC9B,cAAC,IAAD,CACE9E,UAAW,SACXiE,aAAc,CAAEI,WAAY,IAAKC,UAAW,SAF9C,mBAMA,cAAC,IAAD,CAAM5D,IAAK,UAAWqE,MAAI,EAA1B,SACGrB,EAAQsB,KAAKjC,KAAI,SAACH,GAAD,OAChB,cAAC,IAAD,CAAchC,WAAY,kBAAM8B,EAAQ,MAAOE,IAA/C,SACGA,EAAKnC,YAIZ,cAAC,IAAD,CACET,UAAW,SACXiE,aAAc,CAAEI,WAAY,IAAKC,UAAW,SAF9C,gCAMA,cAAC,IAAD,UAAOZ,EAAQuB,WACf,cAAC,IAAD,CAAMhB,aAAc,CAAEI,WAAY,IAAKC,UAAW,SAAlD,uBAGA,cAAC,IAAD,CAAML,aAAc,CAAEK,UAAW,WAAjC,SACGZ,EAAQwB,mBAMjB,cAAC,IAAD,UACE,cAAC,IAAD,CAAMvE,MAAO,OAAQH,eAAgB,SAAUR,UAAW,SAA1D,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAWmF,MAAO,cAAerD,KAAM,QACvC,cAAC,IAAD,uBACA,cAAC,IAAD,0EAShBkB,EAAeoC,aAAe7C,E,4FC/MjB8C,EAAkD,SAC7DxF,GAEA,OACE,eAAC,IAAD,CACEe,WAAY,kBACVf,EAAM6C,QAAQ7C,EAAM+C,KAAoB,WAAf/C,EAAM8C,KAAoB,KAAO,QAE5D9B,WACiB,WAAfhB,EAAM8C,MAAkD,aAAtB9C,EAAM+C,KAAK0C,OAE/CrB,aAAc,CACZsB,qBACuBC,IAArB3F,EAAM+C,KAAKuC,MACPM,IAAUC,IAAW7F,EAAM+C,KAAKuC,OAAQ,QACxCtF,EAAM8F,SACN,6BACAH,GAbV,UAgBE,cAAC,IAAD,CAAMvB,aAAc,CAAEK,UAAW,QAAjC,SACGzE,EAAM+C,KAAoB,WAAf/C,EAAM8C,KAAoB,KAAO,UAE9C9C,EAAM8F,SAAW,cAAC,IAAD,CAAWR,MAAO,aAAiB,S,kBCb9C5C,EAET,GAOEG,EAAU,SAACG,GACXA,GACFpG,YAA4BmJ,cAAInJ,cAA+B,CAACoG,MAI9DgD,EAAoB,uCAAG,WAC3BC,GAD2B,mBAAAC,EAAA,2DAGvBD,GAAWE,OAAOC,OAAOH,GAASI,QAAO,SAACtD,GAAD,OAAUA,KAAMvC,OAAS,GAH3C,wBAInB8F,EAAO,UACXL,EAAQM,OAAR,4BACyBN,EAAQM,OAAOC,cADxC,QAEI,IAHO,OAIVP,EAAQQ,MAAR,cAAuBR,EAAQQ,MAAMD,cAArC,UAA6D,IAJnD,OAKXP,EAAQtB,QAAR,0BACuBsB,EAAQtB,QAAQ6B,cADvC,QAEI,IAPO,OASXP,EAAQS,IAAR,0BAAiCT,EAAQS,IAAIF,cAA7C,MAAiE,IAChEG,QAAQ,MAAO,IAdO,SAgBjBC,IAAMC,IACV,kEACA,CACEC,OAAQ,CACNC,KAAK,OAAD,OAAST,EAAT,KACJU,MAAO,IACPC,WACE,kEACF,mBAAoBC,sCAxBH,wBA4BvB5D,KA5BuB,gIAeW,EAa5B6D,SA5BiB,eAenBlE,EAfmB,uBA6BlBA,EACJoD,QAAO,SAACtD,GAAD,OAAUA,EAAKqE,KAAOrE,EAAKsE,QAAUtE,EAAKuE,KAAOvE,EAAKsE,UAC7DE,MAAK,SAACrB,EAAGsB,GAAJ,OAAWtB,EAAEuB,GAAKD,EAAEC,IAAM,EAAI,MA/Bb,iCAiClB,IAjCkB,4CAAH,sDAqCbC,EAAyC,SAACtE,GACrD,IACM6C,EAAUjH,yBAAenC,KACzB8K,EAAO3I,yBAAetC,KACtBkL,EAAe5I,yBAAepC,KAWpC,OATAyE,qBAAU,YACC,uCAAG,WAAO4E,GAAP,SAAAC,EAAA,kEACVxJ,IADU,SACgBsJ,EAAqBC,GADrC,6EAAH,sDAGT4B,CAAI5B,GAAS6B,MAAK,kBAChBnE,YAAW,kBAAMtG,YAAa,2BAAKA,eAAN,IAAsBQ,QAAQ,OAAU,UAEtE,CAACoI,IAGF,cAAC,IAAD,CAAMnF,MAAO,OAAQD,IAAK,UAA1B,SACG8G,EACiB,IAAhBA,EAAKnH,OACH,eAAC,IAAD,CAAoB8D,UAAW,WAA/B,UACE,cAAC,IAAD,CAAagB,MAAO,SAAUrD,KAAM,QACpC,cAAC,IAAD,qBACA,eAAC,IAAD,gCACqB,IACnB,mBACE8F,KAAM,sCACNC,OAAQ,SACRC,IAAK,aAHP,gCAFF,UAaFN,EAAKzE,KAAI,SAACH,GAAD,OACP,cAAC,EAAD,CACEA,KAAMA,EACND,KAAM,SACND,QAASA,EACTiD,SAAU8B,EAAaM,SAASnF,EAAKuE,SAIzC,QAIVI,EAAkBnC,aAAe7C,E,0BCpHpByF,GAA0C,SACrDnI,GACI,IAAD,EACGY,EAAI,UAAG9D,cAAqBsL,MAChC,SAACrF,GAAD,OAAUA,EAAKC,KAAOhD,EAAMsD,KAAK+E,oBADzB,aAAG,EAEVzH,KACH,OACE,cAAC,IAAD,CACEE,MAAO,YACPwH,UAAW,WACXlE,aAAc,CACZsB,gBAAiB,yBACjB6C,QAAS,OACTC,aAAc,YANlB,SASE,cAAC,IAAD,CAASpI,MAAO,EAAGC,OAAQ,SAA3B,SACGO,OC0CI6H,GAA0C,SACrDzI,GACI,IAAD,EAC2BkB,mBAAwB,MADnD,mBACIwH,EADJ,KACaC,EADb,KAEGC,EAAW5I,EAAMsD,KAGjBuF,EA7DiB,SAAC/C,EAAoBgD,GAArB,OAAgD,YAW7D,IAVVC,EAUS,EAVTA,KACAC,EASS,EATTA,EACAC,EAQS,EARTA,EACAhH,EAOS,EAPTA,KACAqD,EAMS,EANTA,MACA4D,EAKS,EALTA,UACAC,EAIS,EAJTA,aACAC,EAGS,EAHTA,YACAC,EAES,EAFTA,aACAxG,EACS,EADTA,QAEA,OACE,mBAAGyG,UAAS,oBAAeN,EAAf,YAAoBC,EAApB,KAAZ,SACGnD,EAASoC,SAASa,EAAKzF,KAAK+E,WAC3BU,EAAKzF,KAAK+E,YAAcvC,EAASgD,GAC/B,yBACES,OAAQ,sCACRC,KAAMlE,EACNhD,MAAO,CAAEmH,aAAcP,GACvBC,aAAcA,EACdC,YAAaA,EACbC,aAAcA,EACdxG,QAASA,IAGX,sBACEmG,GAAW,GAAR/G,EACHgH,GAAW,GAARhH,EACHnB,MAAOmB,EACPJ,OAAQI,EACRuH,KAAMlE,EACNhD,MAAO,CAAEmH,aAAcP,GACvBC,aAAcA,EACdC,YAAaA,EACbC,aAAcA,EACdxG,QAASA,IAIb,wBACE6G,EAAGzH,EAAO,EACVuH,KAAMlE,EACNhD,MAAO,CAAEmH,aAAcP,GACvBC,aAAcA,EACdC,YAAaA,EACbC,aAAcA,EACdxG,QAASA,OAcE8G,CAFF3K,yBAAejC,KACRiC,yBAAe9B,MAEjC6B,EAASC,yBAAelB,KAE9B,OACE,mCACE,cAAC,KAAD,CACEwF,KAAMsF,EAAStF,KACfjD,OAAQ,CAAEkC,IAAK,GAAIqH,MAAO,GAAIC,OAAQ,IAAKrH,KAAM,KACjDsH,OAAQ,CACNhH,KAAM,SACNiH,IAAKnB,EAASoB,MAAMC,KACpBC,IAAKtB,EAASoB,MAAMG,MAEtBC,OAAQ,CACNtH,KAAM,SACNiH,IAAKnB,EAASoB,MAAMK,KACpBH,IAAKtB,EAASoB,MAAMM,MAEtBC,WAAY,CACVC,OAAO,QAAD,OAAUC,KAAKC,MAAwB,IAAlB9B,EAAS+B,IAAI,IAAc,IAAhD,KACNC,eAAgB,SAChBC,aAAc,IAEhBC,SAAU,CACRN,OAAO,QAAD,OAAUC,KAAKC,MAAwB,IAAlB9B,EAAS+B,IAAI,IAAc,IAAhD,KACNC,eAAgB,SAChBC,cAAe,IAEjBE,SAAU,SAAChC,GACT,OAAOA,EAAK/F,KAAO0F,EAAU,GAAK,GAEpCsC,OAAQ,CAAEC,OAAQ,QAClB7B,YAAa,SAACL,GAAD,OAAgBJ,EAAWI,EAAK/F,KAC7CqG,aAAc,kBAAMV,EAAW,OAC/B9F,QAAS,SAACkG,GACRhM,YAA8B,GAAD,oBACxBA,eADwB,CAE1BgM,EAAKzF,KAAa+E,cAGvB6C,QAAS,gBAAGnC,EAAH,EAAGA,KAAH,OACP,8BACE,cAAC,GAAD,eAAiBA,OAGrB9J,MAAO,CACLkM,UAAWpM,EAAS,UAAY,WAElCqM,WAAYvC,O,+BClHPwC,GAAoC,SAACrL,GAChD,IAAM4I,EAAW,CACf,CACE5F,GAAI,MACJM,KAAMtD,EAAMsD,KAAKqH,IAAIzH,KAAI,SAACH,EAAWuI,GAAZ,MAA4B,CACnDtC,EAAGsC,EAAQ,EACXrC,EAAGwB,KAAKC,MAAa,IAAP3H,GAAgB,UAI9BhE,EAASC,yBAAelB,KAE9B,OACE,mCACE,cAAC,KAAD,CACEwF,KAAMsF,EACNvI,OAAQ,CAAEkC,IAAK,GAAIqH,MAAO,GAAIC,OAAQ,IAAKrH,KAAM,KACjDsH,OAAQ,CACNhH,KAAM,SACNiH,IAAK,EACLG,IAAKlK,EAAMsD,KAAKqH,IAAInK,OAAS,GAE/B4J,OAAQ,CACNtH,KAAM,SACNiH,IAAK,EACLG,IAAuC,IAAjCA,cAAIlK,EAAMsD,KAAKqH,MAEvBJ,WAAY,CACVC,OAAQ,YACRI,eAAgB,SAChBC,aAAc,IAEhBC,SAAU,CACRN,OAAO,iBACPI,eAAgB,SAChBC,cAAe,IAEjB5L,MAAO,CACLkM,UAAWpM,EAAS,UAAY,WAElCwM,SAAS,OC1BJC,GAAc,SACzBhN,GACwC,IAAD,EACb0C,mBAAS,MADI,mBAChCuK,EADgC,KACzBC,EADyB,OAEGxK,mBAAS,GAFZ,mBAEhCyK,EAFgC,KAEjBC,EAFiB,KAuBvC,OAnBAvK,qBAAU,WACJ7C,EAAamN,GACJ,uCAAG,4BAAAzF,EAAA,sEACW2F,IAAMC,KAC3B,6CACA,CACExI,KAAM,CACJyI,EAAG3O,iBALG,OACN4O,EADM,OASZN,EAASM,EAAS1I,MAClBsI,EAAiBpN,GAVL,2CAAH,oDAYXyN,GAAQnE,MAAK,kBACXnE,YAAW,kBAAMtG,YAAa,2BAAKA,eAAN,IAAsBO,MAAM,OAAU,UAGtE,CAAC+N,EAAenN,IACZiN,GAGIS,GAAoC,SAAClM,GAChD,IAAMxB,EAAaQ,yBAAe7B,KAC5ByL,EAAW4C,GAAYhN,GACvBoF,EAAY5E,yBAAe3B,KAAf,KAElB,OACE,cAAC,EAAD,CAAciE,QAASsC,EAAvB,SACE,cAAC,IAAD,CAAM/B,OAAQ,OAAQoC,QAAS,CAAC,MAAO,OAAQkI,MAAO,CAAC,OAAvD,SACGvD,EACC,qCACE,eAAC,IAAD,CAAM5E,KAAM,CAAC,OAAQ,OAAQ,SAA7B,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAS5D,MAAO,EAAhB,kCAEF,cAAC,IAAD,CAAS6B,KAAM,MACf,cAAC,GAAD,CAAaqB,KAAMsF,OAErB,eAAC,IAAD,CAAM5E,KAAM,CAAC,OAAQ,OAAQ,SAA7B,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAS5D,MAAO,EAAhB,4CAEF,cAAC,IAAD,CAAS6B,KAAM,MACf,cAAC,GAAD,CAAUqB,KAAMsF,UAIpB,cAAC,IAAD,CACE9H,MAAO,OACPH,eAAgB,SAChBR,UAAW,SACXiM,SAAU,IAJZ,SAME,eAAC,IAAD,WACE,cAAC,KAAD,CAAa9G,MAAO,WAAYrD,KAAM,QACtC,cAAC,IAAD,uBACA,cAAC,IAAD,8DCrEDS,GAET,GAOEG,GAAU,SAACG,GACXA,GACFjG,YAA8BgJ,cAAIhJ,cAAiC,CAACiG,MAIlEqJ,GAAczJ,cAAH,2FASJ0J,GAA2C,SAAClJ,GACvD,IACQE,EAASC,mBAA0C8I,IAAnD/I,KACF2C,EAAUjH,yBAAehC,KACzBuP,EAAcvN,yBAAelC,KAC7B8K,EAAe5I,yBAAejC,KAC9ByB,EAAaQ,yBAAe7B,KAC5ByL,EAAW4C,GAAYhN,GA6B7B,OA3BA6C,qBAAU,WACR,IAAMmL,EAAQrG,OAAOC,OAAOH,GAASI,QAAO,SAACtD,GAAD,OAAUA,KAClDyJ,EAAMhM,QACRzD,YACE0P,uBAAaD,EAAME,QAAO,SAACC,EAAMC,GAAP,OAAgBH,uBAAaE,EAAMC,UAGhE,CAAC3G,IAEJ5E,qBAAU,WACR,IAAMwL,EAAU,OAAGjE,QAAH,IAAGA,OAAH,EAAGA,EAAUtF,KAC1BJ,KAAI,SAACH,EAAMuI,GAAP,OACHvI,EAAKO,KAAKJ,KAAI,SAAC4J,GAAD,MAAiB,CAAEC,IAAKzB,EAAOtI,GAAI8J,EAAMzE,iBAExD2E,OACC1J,GACFxG,YACE,aAAIwG,EAAKL,UACNsE,MAAK,SAACrB,EAAGsB,GAAJ,OAAWtB,EAAEtF,KAAO4G,EAAE5G,MAAQ,EAAI,KACvCsC,KAAI,SAACH,GAAD,mBAAC,eACDA,GADA,IAEHuC,MAAK,OAAEuH,QAAF,IAAEA,OAAF,EAAEA,EAAYzE,MAAK,SAAC0E,GAAD,OAAWA,EAAM9J,KAAOD,EAAKC,MAAI+J,YAIhE,CAACzJ,EAAD,OAAOsF,QAAP,IAAOA,OAAP,EAAOA,EAAUtF,OAGlB,cAAC,IAAD,CAAMxC,MAAO,OAAQD,IAAK,UAAWuD,aAAc,CAAEK,UAAW,QAAhE,SACG8H,EAC0B,IAAvBA,EAAY/L,OACV,cACA+L,EAAYrJ,KAAI,SAACH,GAAD,OACd,cAAC,EAAD,CACEA,KAAMA,EACND,KAAM,WACND,QAASA,GACTiD,SAAU8B,EAAaM,SAASnF,EAAKC,SAG3C,QAIVsJ,GAAoB/G,aAAe7C,G,+GCjF7BuK,GAAU,SAACnK,GACf,OAAQA,GACN,IAAK,QACH,OAAO,cAAC,KAAD,IACT,IAAK,SACH,OAAO,cAAC,KAAD,IACT,IAAK,UACH,OAAO,cAAC,KAAD,IACT,IAAK,MACH,OAAO,cAAC,KAAD,IAET,QACE,SAIOoK,GAAwD,SACnElN,GACI,IAAD,EACqBkB,mBAAS,IAD9B,mBACIZ,EADJ,KACU6M,EADV,KAqBH,OAlBA9L,qBAAU,WACR,GAAa,KAATf,EAAJ,CAOA,IAAM8M,EAAUzJ,YAAW,WACzBtG,YAAa,2BAAKA,eAAN,IAAsBQ,QAAQ,KAC1ChB,YAAyB,2BACpBA,eADmB,kBAErBmD,EAAM8C,KAAOxC,OAEf,KACH,OAAO,kBAAM+M,aAAaD,IAbxBvQ,YAAyB,2BACpBA,eADmB,kBAErBmD,EAAM8C,UAAO6C,OAYjB,CAAC3F,EAAM8C,KAAMxC,IAGd,cAAC,KAAD,CAAMQ,MAAO,OAAb,SACE,cAAC,IAAD,CACEwM,WAAY,MACZ3M,eAAgB,gBAChBuD,UAAW,WAHb,SAKE,cAAC,KAAD,CACEqJ,MAAOvN,EAAM8C,KAAK0K,cAClBC,SAAU,SAACC,GACTP,EAAQO,IAEVjC,MAAOnL,EACPQ,MAAO,OACP6M,KAAMV,GAAQjN,EAAM8C,a,UClCjB8K,GAAsD,SACjE5N,GACI,IAAD,EAdoB8C,EAefQ,EAASC,oBAfMT,EAeY,GAAD,OAAI9C,EAAM8C,KAAV,KAfMF,cAAjB,QAAD,yIAElBE,KAaIQ,KACFwC,EAAW9G,yBAAe/B,KAF7B,EAGuBiE,mBAA6C,IAHpE,mBAGIsL,EAHJ,KAGWqB,EAHX,KAIG9O,EAASC,yBAAelB,KAJ3B,EAKyBoD,oBAAS,GALlC,mBAKI4M,EALJ,KAKYC,EALZ,KA2BH,OApBA1M,qBAAU,WACJiC,IACEjG,cAAe,cAAH,OAAiBwH,qBAAW7E,EAAM8C,SAChDzF,YAAa,2BACRA,eADO,uCAEKwH,qBAAW7E,EAAM8C,QAAU,KAG9C+K,EACEvK,EAAK,GAAD,OAAItD,EAAM8C,KAAV,MAAmBI,KAAI,SAACH,GAAD,MAAgB,CACzC0I,MAAO1I,EAAKC,GACZuK,MAAOxK,EAAKnC,KACTgE,MAAM,KACN1B,KAAI,SAACH,GAAD,OAAkB8B,qBAAW9B,MACjC+B,KAAK,aAIb,CAACxB,EAAMtD,EAAM8C,OAGd,cAAC,KAAD,CAAMhC,MAAO,OAAb,SACE,cAAC,IAAD,CACEwM,WAAY,MACZ3M,eAAgB,gBAChBuD,UAAW,WAHb,SAKGZ,EACC,sBAAKhB,MAAO,CAAExB,MAAO,QAArB,UACE,cAAC,IAAD,UAAOd,EAAM8C,KAAK0K,gBAClB,cAAC,KAAD,CACE/B,MAAO,CACL8B,MAAK,UAAEf,EAAMpE,MACX,SAACrF,GAAD,OACEA,EAAK0I,QAAU3F,EAAS9F,EAAM8C,gBAF7B,aAAE,EAGJyK,MACH9B,MAAO3F,EAAS9F,EAAM8C,OAExBmD,QAASuG,EACTiB,SAAU,SAACO,GACLA,IACF/Q,YAAkB,2BAAK6I,GAAN,kBAAiB9F,EAAM8C,KAAOkL,EAAIvC,SACnDzO,YAAwB,2BACnBA,eADkB,kBAEpBgD,EAAM8C,KAAOQ,EAAK,GAAD,OAAItD,EAAM8C,KAAV,MACfsF,MAAK,SAACrF,GAAD,OAAeA,EAAKC,KAAOgL,EAAIvC,SACpCxI,SAASC,KAAI,SAACH,GAAD,OAAeA,EAAKC,WAI1CiL,WAAY,kBAAMF,GAAU,IAC5BG,YAAa,kBAAMH,GAAU,IAC7BI,UAAW,SAACC,IACTN,GAAyB,UAAfM,EAAMC,MAAoBD,EAAME,kBAE7CrP,MAAO,SAACA,GAAD,mBAAC,eACHA,GADE,IAEL+L,OAAQjM,EAAM,2BAELE,EAAM+L,QAFD,IAGRuD,SAAU,UACVC,SAAU,UACVC,UAAW,UACXC,UAAW,UACXC,UAAW,UACXC,UAAW,UACXC,UAAW,UACXC,UAAW,UACXC,UAAW,YAEb9P,EAAM+L,eAKhB,kCC7GGtI,GAET,CAAEsM,MAAM,GAOCC,GAA0C,SAAC7L,GACtD,IAAMpD,EAAS0C,IAAgBU,EACzBuE,EAAO3H,EAAMgP,KACf,CAAC,QAAS,SAAU,UAAW,OAC/B,CAAC,SAAU,UAAW,OAE1B,OACE,cAAC,IAAD,UACGhP,EAAMgP,KACHrH,EAAKzE,KAAI,SAACH,GAAD,OAAU,cAAC,GAAD,CAAoBD,KAAMC,OAC7C4E,EAAKzE,KAAI,SAACH,GAAD,OAAU,cAAC,GAAD,CAAmBD,KAAMC,UAItDkM,GAAmB1J,aAAe7C,G,gFCK5BwM,GAAmC,SACvCC,GADuC,OAIpC,WACH,IAAM3C,EAAQzP,cACR4K,EAAO7K,cAAqBoG,KAAI,SAACH,GAAD,mBAAC,eAClCA,GADiC,IAEpC0C,OAAQ+G,EAAMtE,SAASnF,EAAKC,IAAM,gBAAa2C,OAEjD7I,YAAmB6K,GACnBwH,EAAS,CACP3L,UAAW,CACTC,MAAO+I,EAAMtJ,KAAI,SAACH,GAAD,OAAUA,EAAKqM,iBAEjCtH,MAAK,WACN/K,YAA8B,IAC9BD,YACEuS,uBACE1H,EACA6E,EAAMtJ,KAAI,SAACH,GAAD,MAAW,CAAEC,GAAID,MAC3B,YAMFuM,GAAiB1M,cAAH,gKAQP2M,GAAgD,SAC3DvP,GACI,IAAD,EACgBwP,sBAAYF,IAAxBH,EADJ,oBAEG1Q,EAASO,yBAAe5B,KAE9B,OACE,eAAC,IAAD,CAAMyD,IAAK,WAAYoD,QAAS,CAAC,MAAO,OAAxC,UACE,eAAC,IAAD,CACE9D,UAAW,SACXsP,QAAS,YACT1O,WAAY,WACVhE,YAA8B,IAC9BE,YAAkB,IAClBD,YAAwB,KAN5B,UASE,cAAC,KAAD,IACA,cAAC,IAAD,uBAEF,cAAC,KAAD,CACE8D,MAAO,YACPyM,MAAM,gBACN9B,MAAOhN,EACPgP,SAAU,SAAChC,GAAD,OAAWrO,YAAUqO,IAC/BiE,SAAU,EACVC,SAAU,IAEZ,eAAC,IAAD,CACEF,QAAS,YACT1O,WAAYmO,GAAiCC,GAF/C,UAIE,cAAC,KAAD,IACA,cAAC,IAAD,wBAEF,eAAC,IAAD,CACEM,QAAS,MACT1O,WAAY,WACV5D,YAAcA,cAAkB,GAChCE,YAAa,2BAAKA,eAAN,IAAsBO,MAAM,MAJ5C,UAOE,cAAC,KAAD,IACA,cAAC,IAAD,iC,+BClBKgS,GAAiB,SAACC,GAC7B,IAAMC,EAAW,IAAIC,MAAcF,EAAiBG,YAAc,GAMlE,OALA7J,OAAO8J,QAAQJ,EAAiBK,eAAehN,KAAI,SAACH,GAClDA,EAAK,GAAGG,KAAI,SAACnB,GACX+N,EAAS/N,GAAYgB,EAAK,SAGvB+M,EACJK,MAAsB,aAAhBL,EAAS,GAAoB,EAAI,GACvChL,KAAK,KACL6B,QAAQ,MAAO,MChEPyJ,GAAmC,uCAAG,WACjDC,GADiD,iBAAAnK,EAAA,6DAG3CoK,EAAoBD,EAAiBnN,KAAI,SAACH,GAAD,OAAUA,EAAKsC,YAHb,SAIZkL,GAAgBD,GAJJ,cAI3CE,EAJ2C,yBAK1CH,EAAiBnN,KAAI,SAACH,EAAMuI,GAAP,mBAAC,eACxBvI,GADuB,IAE1B0N,kBAAmBD,EAAuBlF,GAAOoF,SACjDjL,OAAQ,iBARuC,2CAAH,sD,SAqDjC8K,G,iFAAf,WAA+BD,GAA/B,SAAApK,EAAA,sEAEUU,IAAMkF,KACV5E,qIAEAoJ,GALN,uCAOIhN,MAPJ,4C,kDC3DMT,GAAU,SACd8E,EACA7B,EACAqJ,GAIA,6BAAO,sCAAAjJ,EAAA,6DACCyK,EAAgBhJ,EAAKtB,QAAO,SAACtD,GAAD,OAAU+C,EAASoC,SAASnF,EAAKuE,ODjCrEsJ,ECmCIC,iBAAOF,EAAe,MADlBG,EDhCDF,EAAiB1N,KACtB,SAACH,EAAMuI,GACL,MAAO,CACLtI,GAAID,EAAKuE,GAAG8H,WACZpK,KAAMjC,EAAKgO,EACX3L,SAAUrC,EAAKiO,GACfpQ,KAAMmC,EAAK0E,GACXpC,SAAUuK,GAAe7M,EAAKqE,IAC9BqJ,kBAAmB,GACnB/L,QAAS3B,EAAKkO,GAAG/N,KAAI,SAACqD,GAAD,MAAa,CAChCvD,GAAIuD,EAAO2K,KAAK9B,WAChBxO,KAAM2F,EAAO4K,SAEfhM,KAAMpC,EAAKqO,EAAElO,KAAI,SAACwD,GAAD,MAAU,CACzB1D,GAAI0D,EAAI2K,IAAIjC,WACZxO,KAAM8F,EAAI4K,QAEZ3M,QAAS5B,EAAKwO,EACV,CACEvO,GAAID,EAAKwO,EAAEC,IAAIpC,WACfxO,KAAMmC,EAAKwO,EAAEE,SAEf9L,EACJF,OAAQ,eCYZ3I,YACE4U,kBAAQZ,EAAuBhU,cAAsB,OAEvDF,YAA4B,IARvB,SASgCwT,GACnCU,GAVG,OAgBL,IAPMa,EATD,OAYL7U,YACE4U,kBAAQC,EAAwB7U,cAAsB,OAElD8U,EAAmCD,EDD1BzO,KAAI,SAACH,GACpB,IAAM8O,EAAS,2BACV9O,GADU,IAEbiC,KAAM,IAAID,KAAKhC,EAAKiC,MAAM8M,cAC1BrB,kBAAmB,CACjB5I,IAAK9E,EAAK0N,mBAEZ9L,QAAS5B,EAAK4B,QACV,CACEoN,gBAAiB,CACftO,MAAO,CACLT,GAAID,EAAK4B,QAAQ3B,IAEnBgP,OAAQjP,EAAK4B,eAGjBgB,EACJjB,QAAS,CACPqN,gBAAiBhP,EAAK2B,QAAQxB,KAAI,SAACqD,GAAD,MAAa,CAC7C9C,MAAO,CACLT,GAAIuD,EAAOvD,IAEbgP,OAAQzL,OAGZpB,KAAM,CACJ4M,gBAAiBhP,EAAKoC,KAAKjC,KAAI,SAACwD,GAAD,MAAU,CACvCjD,MAAO,CACLT,GAAI0D,EAAI1D,IAEVgP,OAAQtL,SAKd,cADOmL,EAAUpM,OACVoM,KCjCEI,EAAI,EAAGA,EAAIL,EAAcpR,OAAQyR,IAClCC,EAAUN,EAAcK,GAC9B9C,EAAS,CACP3L,UAAW,CACTC,MAAO,CAAET,GAAIkP,EAAQlP,IACrBgP,OAAQE,KArBT,kCDWyB,IA3ChCtB,ICgCO,QA4BHuB,GAAmBvP,cAAH,uOAWTwP,GAA4C,SACvDpS,GAEA,IAAM2H,EAAO3I,yBAAetC,KACtBoJ,EAAW9G,yBAAepC,KAF7B,EAGgB4S,sBAAY2C,IAAxBhD,EAHJ,oBAKH,OACE,eAAC,IAAD,CAAM7B,WAAY,SAAUzM,IAAK,WAAjC,UACE,eAAC,KAAD,CAAgBwR,MAAO,EAAvB,UACE,cAAC,IAAD,CAAcC,SAAO,EAArB,SACE,cAAC,KAAD,MAEF,cAAC,KAAD,iFAIF,eAAC,IAAD,CAAQ7C,QAAS,MAAO1O,WAAY8B,GAAQ8E,EAAM7B,EAAUqJ,GAA5D,UACE,cAAC,KAAD,IACA,cAAC,IAAD,8CCnFKzM,GAET,CAAEI,KAAM,MAOCyP,GAA+B,SAACnP,GAC3C,IAAMpD,EAAS0C,IAAgBU,EACzBQ,EAAY5E,yBAAe3B,KAAf,OAElB,OAAK2C,EAAM8C,KAET,eAAC,IAAD,CAAM0P,UAAW,SAAUrO,OAAQ,WAAnC,UACkB,WAAfnE,EAAM8C,KACL,cAAC,IAAD,CAAS1C,MAAO,EAAGC,OAAQ,SAA3B,6BAIA,cAAC,IAAD,CAASD,MAAO,EAAGC,OAAQ,SAA3B,4BAIF,cAAC,IAAD,CAAS4B,KAAM,MACf,cAAC,IAAD,CAAMsC,aAAc,WAApB,SACE,cAAC,GAAD,CAAoByK,KAAqB,WAAfhP,EAAM8C,SAElC,cAAC,IAAD,CAASb,KAAM,MACC,WAAfjC,EAAM8C,KACL,qCACE,cAAC,EAAD,CAAcxB,QAASsC,EAAvB,SACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJ,cAAC,IAAD,CAAS3B,KAAM,MACf,cAAC,IAAD,CAAM9B,UAAW,WAAjB,SACE,cAAC,GAAD,SAIJ,qCACE,cAAC,IAAD,UACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAS8B,KAAM,MACf,cAAC,IAAD,CAAM9B,UAAW,WAAjB,SACE,cAAC,GAAD,YApCc,MA2C1BoS,GAAQhN,aAAe7C,G,4EC9CV+P,GAAsC,SAACzS,GAClD,IAAM0S,EAAaC,eACb/O,EAAY5E,yBAAe3B,KAcjC,OAZAgE,qBAAU,YAENuC,EAAS,MACRA,EAAS,qBACTA,EAAS,mBACTA,EAAS,oBACTA,EAAS,gBAEVvG,YAAa,2BAAKA,eAAN,IAAsBC,MAAM,OAEzC,CAACsG,IAGF,cAAC,EAAD,CAActC,QAASsC,EAAS,KAAhC,SACE,eAAC,IAAD,CACEuI,MAAO,CACL,qCACA,4CAEFlI,QAAS,CAAC,QAAS,UAAW,QAAS,UAAW,QAClDD,KAAM,CAAC,OAAQ,QACfnC,OAAQ6Q,EAAW7Q,OACnBf,MAAO4R,EAAW5R,MARpB,UAUE,cAAC,IAAD,CAAMsL,SAAU,SAAUvK,OAAQ,OAAlC,SACE,cAAC,IAAD,CAAM6D,gBAAiB,WAAvB,SACE,eAAC,IAAD,CACE/E,eAAgB,gBAChBD,aAAc,SACdmB,OAAQ,OAHV,UAKE,cAAC,IAAD,CAASzB,MAAO,EAAGwS,YAAa,WAAhC,wFAIA,eAAC,IAAD,CAAMtF,WAAY,SAAUrJ,QAAS,CAAC,YAAa,YAAnD,UACE,eAAC,IAAD,CAAMqJ,WAAY,SAAlB,UACE,cAAC,KAAD,CAAOrL,KAAM,MACb,cAAC,KAAD,CACE5B,OAAQ,UACRoN,SAAU,SAACoF,GACLA,EACF/U,aAAU,GAEVA,aAAU,MAIhB,cAAC,KAAD,CAAMmE,KAAM,SAEd,cAAC,IAAD,CACEqQ,SAAO,EACPlO,aAAc,CAAE0O,OAAQ,WACxB/R,WAAY,kBACVgS,OAAOC,KACL,gDACA,WANN,SAUE,cAAC,KAAD,CACEC,IAAK,SACLC,IC5FL,q8GD6FKrR,OAAQ,OACRf,MAAO,OACPsD,aAAc,CAAEzC,QAAS,kBAOrC,cAAC,IAAD,CACEyK,SAAU,WACV/L,OAAQ,OACR+D,aAAc,CAAE+O,SAAU,UAH5B,SAKE,cAAC,GAAD,CAASrQ,KAAM,aAEjB,cAAC,IAAD,CAAMsJ,SAAU,WAAhB,SACE,cAAC,IAAD,CAASgH,YAAa,WAAYnR,KAAM,QAE1C,cAAC,IAAD,CACEmK,SAAU,WACV/L,OAAQ,OACR+D,aAAc,CAAE+O,SAAU,UAH5B,SAKE,cAAC,GAAD,CAASrQ,KAAM,eAEjB,cAAC,IAAD,CAAMsJ,SAAU,WAAhB,SACE,cAAC,IAAD,CAASgH,YAAa,WAAYnR,KAAM,QAE1C,cAAC,IAAD,UACE,eAAC,IAAD,CACEmK,SAAU,OACV/L,OAAQ,OACRK,aAAc,QACdyL,MAAO,CAAC,UAAW,UAAW,QAC9BnI,KAAM,CACJqP,YAAO,YAAa,QACpB,OACAA,YAAO,QAAS,SAElB/F,WAAY,UAVd,UAYE,cAAC,EAAD,IACA,cAAC,IAAD,CAASrL,KAAM,MACf,cAAC,GAAD,eEpICqR,GAA8B,SAACtT,GAC1C,OAAO,cAAC,GAAD,M,+JCQMuT,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqB3L,MAAK,YAAkD,IAA/C4L,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,OCHdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACC,EAAA,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.5d08ac23.chunk.js","sourcesContent":["import { makeVar } from '@apollo/client';\nimport { ArticleExternal, ArticleInternal } from '../types/Article';\n\nexport type SearchOption = {\n  author?: string;\n  title?: string;\n  tag?: string;\n  journal?: string;\n};\n\nexport type FetchOption = {\n  author?: string[];\n  tag?: string[];\n  journal?: string[];\n};\n\nexport type SelectedFilter = {\n  author?: string;\n  tag?: string;\n  journal?: string;\n};\n\nexport const articlesSearchedVar = makeVar<ArticleExternal[]>([]);\nexport const selectedArticlesOnSearchVar = makeVar<string[]>([]);\nexport const queryForArticleSearchVar = makeVar<SearchOption>({});\n\nexport const articlesFetchedVar = makeVar<ArticleInternal[]>([]);\nexport const selectedArticlesOnDatabaseVar = makeVar<string[]>([]);\nexport const queryForArticleFetchVar = makeVar<FetchOption>({});\nexport const selectedFilterVar = makeVar<SelectedFilter>({});\n\nexport const currentIndexVar = makeVar<number>(0);\nexport const plotLaunchVar = makeVar<number>(0);\n\nexport const paramKVar = makeVar<number>(2);\n\nexport const isLoadingVar = makeVar<{ [key in string]: boolean }>({\n  main: true,\n  articleListDatabase: true,\n  articleDetails: false,\n  fetchOptionAuthor: true,\n  fetchOptionJournal: true,\n  fetchOptionTag: true,\n  plot: false,\n  search: false,\n});\n\nexport const isDarkVar = makeVar<boolean>(false);\n\nexport const fields = {\n  selectedArticlesOnSearch: {\n    read() {\n      return selectedArticlesOnSearchVar();\n    },\n  },\n  articlesSearched: {\n    read() {\n      return articlesSearchedVar();\n    },\n  },\n  queryForArticleSearch: {\n    read() {\n      return queryForArticleSearchVar();\n    },\n  },\n  selectedArticlesOnDatabase: {\n    read() {\n      return selectedArticlesOnDatabaseVar();\n    },\n  },\n  articlesFetched: {\n    read() {\n      return articlesFetchedVar();\n    },\n  },\n  queryForArticleFetch: {\n    read() {\n      return queryForArticleFetchVar();\n    },\n  },\n  currentIndex: {\n    read() {\n      return currentIndexVar();\n    },\n  },\n  plotLaunch: {\n    read() {\n      return plotLaunchVar();\n    },\n  },\n  paramK: {\n    read() {\n      return paramKVar();\n    },\n  },\n  selectedFilter: {\n    read() {\n      return selectedFilterVar();\n    },\n  },\n};\n","import React from 'react';\nimport './App.css';\nimport { Index } from './pages/Index';\nimport { ApolloProvider } from './ApolloProvider';\nimport { Provider } from '@react-spectrum/provider';\nimport { defaultTheme, darkTheme } from '@adobe/react-spectrum';\nimport { hot } from 'react-hot-loader';\nimport { useReactiveVar } from '@apollo/client';\nimport { isDarkVar } from './localState';\nimport dotenv from 'dotenv';\n\nfunction App() {\n  dotenv.config();\n\n  const isDark = useReactiveVar(isDarkVar);\n  return (\n    <ApolloProvider>\n      <Provider theme={isDark ? darkTheme : defaultTheme}>\n        <Index />\n      </Provider>\n    </ApolloProvider>\n  );\n}\n\nexport default hot(module)(App);\n","import {\n  InMemoryCache,\n  HttpLink,\n  ApolloClient,\n  NormalizedCacheObject,\n  ApolloProvider as Provider,\n} from '@apollo/client';\nimport { fields } from './localState';\nimport React from 'react';\n\nexport type ApolloProviderProps = React.PropsWithChildren<{}>;\n\nconst cache = new InMemoryCache({\n  resultCaching: true,\n  typePolicies: {\n    Query: {\n      fields,\n    },\n  },\n});\nconst link = new HttpLink({\n  uri: 'https://sta220-2021-f.herokuapp.com/graphql',\n});\n\nconst client: ApolloClient<NormalizedCacheObject> = new ApolloClient({\n  cache,\n  resolvers: {},\n  link,\n});\n\nexport const ApolloProvider: React.FC<ApolloProviderProps> = (\n  props: ApolloProviderProps\n) => {\n  return <Provider client={client}>{props.children}</Provider>;\n};\n","import { Grid, Heading, View } from '@adobe/react-spectrum';\nimport React from 'react';\n\nexport type ArticleTitleProps = { text: string };\n\nexport const ArticleTitle: React.FC<ArticleTitleProps> = (\n  props: ArticleTitleProps\n) => {\n  return (\n    <View alignSelf={'center'}>\n      <Heading level={2} margin={'size-0'}>\n        {props.text}\n      </Heading>\n    </View>\n  );\n};\n","import { ActionButton, Item, Text } from '@adobe/react-spectrum';\nimport { useReactiveVar } from '@apollo/client';\nimport { Flex, Grid } from '@react-spectrum/layout';\nimport ChevronLeft from '@spectrum-icons/workflow/ChevronLeft';\nimport ChevronRight from '@spectrum-icons/workflow/ChevronRight';\nimport React from 'react';\nimport {\n  currentIndexVar,\n  selectedArticlesOnDatabaseVar,\n} from '../../localState';\nimport { ArticleInternal } from '../../types/Article';\nimport { ArticleTitle } from '../atoms/ArticleTitle';\n\ntype ArticleHeaderProps = ArticleInternal & {};\n\nexport const ArticleHeader: React.FC<ArticleHeaderProps> = (\n  props: ArticleHeaderProps\n) => {\n  const length = selectedArticlesOnDatabaseVar().length;\n  const current = useReactiveVar(currentIndexVar);\n  return (\n    <Flex alignContent={'baseline'} justifyContent={'space-between'}>\n      <ArticleTitle text={props.name} />\n      <Flex alignSelf={'center'} gap={'size-100'}>\n        <ActionButton\n          width={'size-600'}\n          onPressEnd={() => currentIndexVar(current - 1)}\n          isDisabled={current === 0}\n        >\n          <ChevronLeft />\n        </ActionButton>\n        <Flex alignSelf={'center'} width={'size-600'} justifyContent={'center'}>\n          <Text>\n            {current + 1} / {length}\n          </Text>\n        </Flex>\n        <ActionButton\n          width={'size-600'}\n          onPressEnd={() => currentIndexVar(current + 1)}\n          isDisabled={length - 1 === current}\n        >\n          <ChevronRight />\n        </ActionButton>\n      </Flex>\n    </Flex>\n  );\n};\n","import {\n  Grid,\n  IllustratedMessage,\n  ProgressCircle,\n  Heading,\n} from '@adobe/react-spectrum';\nimport { motion } from 'framer-motion';\nimport React, { useEffect, useState } from 'react';\n\nexport type LoadingScreenProps = {\n  loading: boolean;\n  dimension: Pick<\n    DOMRectReadOnly,\n    'x' | 'y' | 'top' | 'left' | 'right' | 'bottom' | 'height' | 'width'\n  >;\n  size?: 'S' | 'M' | 'L';\n};\n\nexport const LoadingScreen: React.FC<LoadingScreenProps> = (\n  props: LoadingScreenProps\n) => {\n  const [inTransition, setInTransition] = useState(false);\n\n  useEffect(() => {\n    if (!props.loading) {\n      setInTransition(true);\n    } else {\n      setInTransition(false);\n    }\n  }, [props.loading]);\n\n  return (\n    <motion.div\n      animate={{\n        display: inTransition ? 'none' : 'unset',\n        opacity: props.loading ? 1 : 0,\n      }}\n      initial={{\n        opacity: 1,\n        display: 'unset',\n      }}\n    >\n      <Grid\n        height={props.dimension.height}\n        width={props.dimension.width}\n        alignContent={'center'}\n        justifyContent={'center'}\n        position={'absolute'}\n      >\n        <IllustratedMessage>\n          <ProgressCircle\n            isIndeterminate\n            size={props.size || 'L'}\n            aria-label=\"Loading...\"\n          />\n          <Heading>Loading...</Heading>\n        </IllustratedMessage>\n      </Grid>\n    </motion.div>\n  );\n};\n","import {\n  Grid,\n  IllustratedMessage,\n  ProgressCircle,\n  Heading,\n  Flex,\n  View,\n} from '@adobe/react-spectrum';\nimport { motion } from 'framer-motion';\nimport React from 'react';\nimport { useMeasure } from 'react-use';\nimport { LoadingScreen } from './LoadingScreen';\n\nexport type LoadedScreenProps = React.PropsWithChildren<{\n  loading: boolean;\n  size?: string;\n}>;\n\nexport const LoadedScreen: React.FC<LoadedScreenProps> = (\n  props: LoadedScreenProps\n) => {\n  const [ref, dimension] = useMeasure<HTMLDivElement>();\n  return (\n    <Grid position={'relative'} height={'100%'}>\n      <motion.div\n        ref={ref}\n        style={{\n          position: 'relative',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          zIndex: 10,\n        }}\n        animate={{\n          opacity: -((props.loading ? 1 : 0) - 1),\n        }}\n        initial={{\n          opacity: 0,\n        }}\n      >\n        {props.children}\n      </motion.div>\n      <View\n        position={'absolute'}\n        top={0}\n        left={0}\n        width={'100%'}\n        height={'100%'}\n        zIndex={0}\n      >\n        <LoadingScreen\n          loading={props.loading}\n          dimension={dimension}\n          size={props.size as 'S' | 'M' | 'L'}\n        />\n      </View>\n    </Grid>\n  );\n};\n","import {\n  ActionButton,\n  Divider,\n  Header,\n  Heading,\n  IllustratedMessage,\n  View,\n  Text,\n  minmax,\n} from '@adobe/react-spectrum';\nimport { gql, useQuery, useReactiveVar } from '@apollo/client';\nimport { Flex, Grid } from '@react-spectrum/layout';\nimport MagicWand from '@spectrum-icons/workflow/MagicWand';\nimport { capitalize } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport Scrollbar from 'react-scrollbars-custom';\nimport {\n  currentIndexVar,\n  isLoadingVar,\n  queryForArticleFetchVar,\n  selectedArticlesOnDatabaseVar,\n  selectedFilterVar,\n} from '../../localState';\nimport { ArticleInternal } from '../../types/Article';\nimport { ArticleHeader } from '../molecules/ArticleHeader';\nimport { LoadedScreen } from '../molecules/LoadedScreen';\n\ntype PropsBase = {};\nexport const defaultValue: Required<\n  Pick<PropsBase, { [Key in keyof PropsBase]-?: Key }[keyof PropsBase]>\n> = {};\nconst PropsDefault = defaultValue;\ntype Props = PropsBase & typeof PropsDefault;\n\nexport { defaultValue as ArticleDetailsDefaultValue };\nexport type ArticleDetailsProps = Props;\n\nconst getArticleDetails = gql`\n  query($where: [String]) {\n    multipleArticles(where: $where) {\n      id\n      name\n      authors {\n        id\n        name\n        articles {\n          id\n        }\n      }\n      date\n      citation\n      abstract\n      journal {\n        id\n        name\n        articles {\n          id\n        }\n      }\n      tags {\n        id\n        name\n        articles {\n          id\n        }\n      }\n    }\n  }\n`;\n\nconst onClick = (type: string, item: any) => {\n  selectedFilterVar({ ...selectedFilterVar(), [type]: item.id });\n  queryForArticleFetchVar({\n    ...queryForArticleFetchVar(),\n    [type]: item.articles.map((item: any) => item.id),\n  });\n};\n\nexport const ArticleDetails: React.FC<PropsBase> = (_props: PropsBase) => {\n  const props = (defaultValue && _props) as Props;\n  const selectedArticles = useReactiveVar(selectedArticlesOnDatabaseVar);\n  const { data } = useQuery(getArticleDetails, {\n    variables: {\n      where: selectedArticles,\n    },\n    onCompleted: () => {\n      currentIndexVar(selectedArticles.length - 1);\n      setTimeout(\n        () => isLoadingVar({ ...isLoadingVar(), articleDetails: false }),\n        500\n      );\n    },\n  });\n  const isLoading = useReactiveVar(isLoadingVar)['articleDetails'];\n  const current = useReactiveVar(currentIndexVar);\n\n  const [article, setArticle] = useState<ArticleInternal | null>(null);\n\n  useEffect(() => {\n    isLoadingVar({\n      ...isLoadingVar(),\n      articleDetails: selectedArticles.length !== 0,\n    });\n  }, [selectedArticles]);\n\n  useEffect(() => {\n    if (data) {\n      setArticle(data.multipleArticles[current]);\n      if (isLoadingVar()['articleListDatabase']) {\n        isLoadingVar({ ...isLoadingVar(), articleListDatabase: false });\n      }\n    }\n  }, [current, data]);\n\n  return (\n    <LoadedScreen loading={isLoading}>\n      <Grid height={'100%'}>\n        {article ? (\n          <Grid rows={['size-800', '0.5rem', 'auto']} width={'100%'}>\n            <ArticleHeader {...article} />\n            <Divider size={'S'} />\n            <Scrollbar>\n              <Grid\n                columns={['size-2000', 'auto']}\n                columnGap={'size-200'}\n                rowGap={'size-100'}\n                UNSAFE_style={{ overflowY: 'hidden' }}\n                marginTop={'size-200'}\n                marginBottom={'size-200'}\n              >\n                <View\n                  alignSelf={'center'}\n                  UNSAFE_style={{ fontWeight: 700, textAlign: 'right' }}\n                >\n                  ID:\n                </View>\n                <View>{article.id}</View>\n                <View\n                  alignSelf={'center'}\n                  UNSAFE_style={{ fontWeight: 700, textAlign: 'right' }}\n                >\n                  Authors:\n                </View>\n                <Flex gap={'size-50'}>\n                  {article.authors.map((item: any) => (\n                    <ActionButton onPressEnd={() => onClick('author', item)}>\n                      {item.name}\n                    </ActionButton>\n                  ))}\n                </Flex>\n                {article.journal ? (\n                  <>\n                    <View\n                      alignSelf={'center'}\n                      UNSAFE_style={{ fontWeight: 700, textAlign: 'right' }}\n                    >\n                      Journal:\n                    </View>\n                    <View>\n                      <ActionButton\n                        onPressEnd={() => onClick('journal', article.journal!)}\n                      >\n                        {article.journal.name\n                          .split(' ')\n                          .map((item: string) => capitalize(item))\n                          .join(' ')}\n                      </ActionButton>\n                    </View>\n                  </>\n                ) : null}\n                <View\n                  alignSelf={'center'}\n                  UNSAFE_style={{ fontWeight: 700, textAlign: 'right' }}\n                >\n                  Publish Date:\n                </View>\n                <View>{new Date(article.date).toLocaleDateString()}</View>\n                <View\n                  alignSelf={'center'}\n                  UNSAFE_style={{ fontWeight: 700, textAlign: 'right' }}\n                >\n                  Tags:\n                </View>\n                <Flex gap={'size-50'} wrap>\n                  {article.tags.map((item: any) => (\n                    <ActionButton onPressEnd={() => onClick('tag', item)}>\n                      {item.name}\n                    </ActionButton>\n                  ))}\n                </Flex>\n                <View\n                  alignSelf={'center'}\n                  UNSAFE_style={{ fontWeight: 700, textAlign: 'right' }}\n                >\n                  Num. of Citations:\n                </View>\n                <View>{article.citation}</View>\n                <View UNSAFE_style={{ fontWeight: 700, textAlign: 'right' }}>\n                  Abstract:\n                </View>\n                <View UNSAFE_style={{ textAlign: 'justify' }}>\n                  {article.abstract}\n                </View>\n              </Grid>\n            </Scrollbar>\n          </Grid>\n        ) : (\n          <Grid>\n            <Flex width={'100%'} justifyContent={'center'} alignSelf={'center'}>\n              <IllustratedMessage>\n                <MagicWand color={'informative'} size={'XXL'} />\n                <Heading>Welcome!</Heading>\n                <Text>Select a question from the side bar to proceed.</Text>\n              </IllustratedMessage>\n            </Flex>\n          </Grid>\n        )}\n      </Grid>\n    </LoadedScreen>\n  );\n};\nArticleDetails.defaultProps = defaultValue;\n","import { ActionButton, Text, View } from '@adobe/react-spectrum';\nimport React from 'react';\nimport { ArticleExternal, ArticleInternal } from '../../types/Article';\nimport Checkmark from '@spectrum-icons/workflow/Checkmark';\nimport { schemeSet2 } from 'd3-scale-chromatic';\nimport hexToRgba from 'hex-to-rgba';\n\nexport type ArticleListItemProps = {\n  item: Partial<ArticleInternal & ArticleExternal> & { color?: number };\n  type: 'search' | 'database';\n  onClick: (id?: string) => void;\n  selected: boolean;\n};\n\nexport const ArticleListItem: React.FC<ArticleListItemProps> = (\n  props: ArticleListItemProps\n) => {\n  return (\n    <ActionButton\n      onPressEnd={() =>\n        props.onClick(props.item[props.type === 'search' ? 'Id' : 'id'])\n      }\n      isDisabled={\n        props.type === 'search' ? false : props.item.status === 'notReady'\n      }\n      UNSAFE_style={{\n        backgroundColor:\n          props.item.color !== undefined\n            ? hexToRgba(schemeSet2[props.item.color], '0.25')\n            : props.selected\n            ? 'rgba(200,200,255,0.5)'\n            : undefined,\n      }}\n    >\n      <Text UNSAFE_style={{ textAlign: 'left' }}>\n        {props.item[props.type === 'search' ? 'DN' : 'name']}\n      </Text>\n      {props.selected ? <Checkmark color={'positive'} /> : null}\n    </ActionButton>\n  );\n};\n","import { useReactiveVar } from '@apollo/client';\nimport {\n  Grid,\n  ActionButton,\n  Text,\n  Heading,\n  IllustratedMessage,\n  ProgressCircle,\n} from '@adobe/react-spectrum';\nimport React, { useEffect } from 'react';\nimport {\n  articlesSearchedVar,\n  isLoadingVar,\n  queryForArticleSearchVar,\n  SearchOption,\n  selectedArticlesOnSearchVar,\n} from '../../localState';\nimport Axios from 'axios';\nimport { ArticleExternal } from '../../types/Article';\nimport { ArticleListItem } from '../atoms/ArticleListItem';\nimport { xor } from 'lodash';\nimport GlobeSearch from '@spectrum-icons/workflow/GlobeSearch';\n\ntype PropsBase = {};\nexport const defaultValue: Required<\n  Pick<PropsBase, { [Key in keyof PropsBase]-?: Key }[keyof PropsBase]>\n> = {};\nconst PropsDefault = defaultValue;\ntype Props = PropsBase & typeof PropsDefault;\n\nexport { defaultValue as ArticleListSearchDefaultValue };\nexport type ArticleListSearchProps = Props;\n\nconst onClick = (id?: string) => {\n  if (id) {\n    selectedArticlesOnSearchVar(xor(selectedArticlesOnSearchVar(), [id]));\n  }\n};\n\nconst getArticleListSearch = async (\n  options: SearchOption\n): Promise<ArticleExternal[]> => {\n  if (options && Object.values(options).filter((item) => item).length > 0) {\n    const core = `${\n      options.author\n        ? `Composite(AA.AuN='${options.author.toLowerCase()}'), `\n        : ''\n    }${options.title ? `Ti='${options.title.toLowerCase()}'..., ` : ''}${\n      options.journal\n        ? `Composite(J.JN='${options.journal.toLowerCase()}'), `\n        : ''\n    }${\n      options.tag ? `Composite(F.FN='${options.tag.toLowerCase()}')` : ''\n    }`.replace(/, $/, '');\n    const articles: ArticleExternal[] = (\n      await Axios.get(\n        'https://api.labs.cognitive.microsoft.com/academic/v1.0/evaluate',\n        {\n          params: {\n            expr: `And(${core})`,\n            count: 100,\n            attributes:\n              'D,CC,AA.DAuN,AA.AuId,DN,Id,S,F.DFN,F.FId,FP,J.JId,J.JN,IA,FamId',\n            'subscription-key': process.env.REACT_APP_API_KEY,\n          },\n        }\n      )\n    ).data?.entities;\n    return articles\n      .filter((item) => item.IA && (item.FamId === item.Id || !item.FamId))\n      .sort((a, b) => (a.DN < b.DN ? -1 : 1));\n  } else {\n    return [];\n  }\n};\n\nexport const ArticleListSearch: React.FC<PropsBase> = (_props: PropsBase) => {\n  const props = (defaultValue && _props) as Props;\n  const options = useReactiveVar(queryForArticleSearchVar);\n  const list = useReactiveVar(articlesSearchedVar);\n  const selectedList = useReactiveVar(selectedArticlesOnSearchVar);\n\n  useEffect(() => {\n    const set = async (options: SearchOption) => {\n      articlesSearchedVar(await getArticleListSearch(options));\n    };\n    set(options).then(() =>\n      setTimeout(() => isLoadingVar({ ...isLoadingVar(), search: false }), 500)\n    );\n  }, [options]);\n\n  return (\n    <Grid width={'100%'} gap={'size-75'}>\n      {list ? (\n        list.length === 0 ? (\n          <IllustratedMessage marginTop={'size-400'}>\n            <GlobeSearch color={'notice'} size={'XXL'} />\n            <Heading>Search</Heading>\n            <Text>\n              Search articles on{' '}\n              <a\n                href={'https://academic.microsoft.com/home'}\n                target={'_blank'}\n                rel={'noreferrer'}\n              >\n                Microsoft Academic\n              </a>\n              .\n            </Text>\n          </IllustratedMessage>\n        ) : (\n          list.map((item) => (\n            <ArticleListItem\n              item={item}\n              type={'search'}\n              onClick={onClick}\n              selected={selectedList.includes(item.Id)}\n            />\n          ))\n        )\n      ) : null}\n    </Grid>\n  );\n};\nArticleListSearch.defaultProps = defaultValue;\n","import React from 'react';\nimport { Node } from '@nivo/scatterplot';\nimport { Flex, Heading, View } from '@adobe/react-spectrum';\nimport { gql, useQuery } from '@apollo/client';\nimport { articlesFetchedVar } from '../../localState';\n\nexport type PlotTooltipProps = any;\n\nexport const PlotTooltip: React.FC<PlotTooltipProps> = (\n  props: PlotTooltipProps\n) => {\n  const name = articlesFetchedVar().find(\n    (item) => item.id === props.data.articleId\n  )?.name;\n  return (\n    <View\n      width={'size-3000'}\n      minHeight={'size-300'}\n      UNSAFE_style={{\n        backgroundColor: 'rgba(255,255,255, 0.5)',\n        padding: '1rem',\n        textOverflow: 'ellipsis',\n      }}\n    >\n      <Heading level={5} margin={'size-0'}>\n        {name}\n      </Heading>\n    </View>\n  );\n};\n","import { useReactiveVar } from '@apollo/client';\nimport { Node, ResponsiveScatterPlot } from '@nivo/scatterplot';\nimport React, { useState } from 'react';\nimport {\n  articlesFetchedVar,\n  currentIndexVar,\n  isDarkVar,\n  selectedArticlesOnDatabaseVar,\n} from '../../localState';\nimport { PlotTooltip } from '../atoms/PlotTooltip';\n\nexport type ScatterPlotProps = { data: any };\n\nconst createCustomNode = (selected: string[], highlightIndex: number) => ({\n  node,\n  x,\n  y,\n  size,\n  color,\n  blendMode,\n  onMouseEnter,\n  onMouseMove,\n  onMouseLeave,\n  onClick,\n}: any) => {\n  return (\n    <g transform={`translate(${x},${y})`}>\n      {selected.includes(node.data.articleId) ? (\n        node.data.articleId === selected[highlightIndex] ? (\n          <polygon\n            points={'0,-16.5 -9,12 13.5,-6 -13.5,-6 9,12'}\n            fill={color}\n            style={{ mixBlendMode: blendMode }}\n            onMouseEnter={onMouseEnter}\n            onMouseMove={onMouseMove}\n            onMouseLeave={onMouseLeave}\n            onClick={onClick}\n          />\n        ) : (\n          <rect\n            x={size * -0.5}\n            y={size * -0.5}\n            width={size}\n            height={size}\n            fill={color}\n            style={{ mixBlendMode: blendMode }}\n            onMouseEnter={onMouseEnter}\n            onMouseMove={onMouseMove}\n            onMouseLeave={onMouseLeave}\n            onClick={onClick}\n          />\n        )\n      ) : (\n        <circle\n          r={size / 2}\n          fill={color}\n          style={{ mixBlendMode: blendMode }}\n          onMouseEnter={onMouseEnter}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n          onClick={onClick}\n        />\n      )}\n    </g>\n  );\n};\n\nexport const ScatterPlot: React.FC<ScatterPlotProps> = (\n  props: ScatterPlotProps\n) => {\n  const [hovered, setHovered] = useState<string | null>(null);\n  const plotData = props.data;\n  const selected = useReactiveVar(selectedArticlesOnDatabaseVar);\n  const hightlightIndex = useReactiveVar(currentIndexVar);\n  const customNode = createCustomNode(selected, hightlightIndex);\n  const isDark = useReactiveVar(isDarkVar);\n\n  return (\n    <>\n      <ResponsiveScatterPlot\n        data={plotData.data}\n        margin={{ top: 40, right: 40, bottom: 100, left: 100 }}\n        xScale={{\n          type: 'linear',\n          min: plotData.range.xMin,\n          max: plotData.range.xMax,\n        }}\n        yScale={{\n          type: 'linear',\n          min: plotData.range.yMin,\n          max: plotData.range.yMax,\n        }}\n        axisBottom={{\n          legend: `PC1: ${Math.round(plotData.prl[0] * 10000) / 100}%`,\n          legendPosition: 'middle',\n          legendOffset: 50,\n        }}\n        axisLeft={{\n          legend: `PC2: ${Math.round(plotData.prl[1] * 10000) / 100}%`,\n          legendPosition: 'middle',\n          legendOffset: -50,\n        }}\n        nodeSize={(node: Node) => {\n          return node.id === hovered ? 15 : 9;\n        }}\n        colors={{ scheme: 'set2' }}\n        onMouseMove={(node: Node) => setHovered(node.id)}\n        onMouseLeave={() => setHovered(null)}\n        onClick={(node: Node) => {\n          selectedArticlesOnDatabaseVar([\n            ...selectedArticlesOnDatabaseVar(),\n            (node.data as any).articleId,\n          ]);\n        }}\n        tooltip={({ node }) => (\n          <div>\n            <PlotTooltip {...node} />\n          </div>\n        )}\n        theme={{\n          textColor: isDark ? '#DDDDDD' : '#333333',\n        }}\n        renderNode={customNode}\n      />\n    </>\n  );\n};\n","import { useReactiveVar } from '@apollo/client';\nimport { ResponsiveLine } from '@nivo/line';\nimport { max } from 'lodash';\nimport React from 'react';\nimport { isDarkVar } from '../../localState';\n\nexport type LinePlotProps = { data: any };\n\nexport const LinePlot: React.FC<LinePlotProps> = (props: LinePlotProps) => {\n  const plotData = [\n    {\n      id: 'prl',\n      data: props.data.prl.map((item: any, index: any) => ({\n        x: index + 1,\n        y: Math.round(item * 10000) / 100,\n      })),\n    },\n  ];\n  const isDark = useReactiveVar(isDarkVar);\n\n  return (\n    <>\n      <ResponsiveLine\n        data={plotData}\n        margin={{ top: 40, right: 40, bottom: 100, left: 100 }}\n        xScale={{\n          type: 'linear',\n          min: 0,\n          max: props.data.prl.length + 1,\n        }}\n        yScale={{\n          type: 'linear',\n          min: 0,\n          max: (max(props.data.prl) as number) * 110,\n        }}\n        axisBottom={{\n          legend: 'Dimension',\n          legendPosition: 'middle',\n          legendOffset: 50,\n        }}\n        axisLeft={{\n          legend: `Importance (%)`,\n          legendPosition: 'middle',\n          legendOffset: -50,\n        }}\n        theme={{\n          textColor: isDark ? '#DDDDDD' : '#333333',\n        }}\n        useMesh={true}\n      />\n    </>\n  );\n};\n","import {\n  Divider,\n  Flex,\n  Grid,\n  Heading,\n  IllustratedMessage,\n  View,\n  Text,\n} from '@adobe/react-spectrum';\nimport { useReactiveVar } from '@apollo/client';\nimport axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { isLoadingVar, paramKVar, plotLaunchVar } from '../../localState';\nimport { useMeasure, useWindowSize } from 'react-use';\nimport { ScatterPlot } from '../molecules/ScatterPlot';\nimport MagicWand from '@spectrum-icons/workflow/MagicWand';\nimport DataMapping from '@spectrum-icons/workflow/DataMapping';\nimport { LoadedScreen } from '../molecules/LoadedScreen';\nimport { LinePlot } from '../molecules/LinePlot';\n\nexport type PlotAreaProps = {};\n\nexport const usePlotData = (\n  plotLaunch: number\n): null | { range: any; data: any[] } => {\n  const [value, setValue] = useState(null);\n  const [currentLaunch, setcurrentLaunch] = useState(0);\n\n  useEffect(() => {\n    if (plotLaunch > currentLaunch) {\n      const fetch = async () => {\n        const response = await axios.post(\n          'https://sta220-2021-f.herokuapp.com/kmeans',\n          {\n            data: {\n              k: paramKVar(),\n            },\n          }\n        );\n        setValue(response.data);\n        setcurrentLaunch(plotLaunch);\n      };\n      fetch().then(() =>\n        setTimeout(() => isLoadingVar({ ...isLoadingVar(), plot: false }), 1000)\n      );\n    }\n  }, [currentLaunch, plotLaunch]);\n  return value;\n};\n\nexport const PlotArea: React.FC<PlotAreaProps> = (props: PlotAreaProps) => {\n  const plotLaunch = useReactiveVar(plotLaunchVar);\n  const plotData = usePlotData(plotLaunch);\n  const isLoading = useReactiveVar(isLoadingVar)['plot'];\n\n  return (\n    <LoadedScreen loading={isLoading}>\n      <Grid height={'100%'} columns={['1fr', '1fr']} areas={['C C']}>\n        {plotData ? (\n          <>\n            <Grid rows={['4rem', 'auto', '36rem']}>\n              <Flex>\n                <Heading level={2}>K-Means Clustering</Heading>\n              </Flex>\n              <Divider size={'S'} />\n              <ScatterPlot data={plotData} />\n            </Grid>\n            <Grid rows={['4rem', 'auto', '36rem']}>\n              <Flex>\n                <Heading level={2}>Principal Component Analysis</Heading>\n              </Flex>\n              <Divider size={'S'} />\n              <LinePlot data={plotData} />\n            </Grid>\n          </>\n        ) : (\n          <Flex\n            width={'100%'}\n            justifyContent={'center'}\n            alignSelf={'center'}\n            gridArea={'C'}\n          >\n            <IllustratedMessage>\n              <DataMapping color={'positive'} size={'XXL'} />\n              <Heading>Plotting</Heading>\n              <Text>Hit \"Run k-means\" to generate a plot.</Text>\n            </IllustratedMessage>\n          </Flex>\n        )}\n      </Grid>\n    </LoadedScreen>\n  );\n};\n","import { gql, useQuery, useReactiveVar } from '@apollo/client';\nimport { Grid } from '@react-spectrum/layout';\nimport { intersection, xor } from 'lodash';\nimport React, { useEffect } from 'react';\nimport {\n  articlesFetchedVar,\n  currentIndexVar,\n  plotLaunchVar,\n  queryForArticleFetchVar,\n  selectedArticlesOnDatabaseVar,\n} from '../../localState';\nimport { ArticleInternal } from '../../types/Article';\nimport { ArticleListItem } from '../atoms/ArticleListItem';\nimport { usePlotData } from '../organisms/PlotArea';\n\ntype PropsBase = {};\nexport const defaultValue: Required<\n  Pick<PropsBase, { [Key in keyof PropsBase]-?: Key }[keyof PropsBase]>\n> = {};\nconst PropsDefault = defaultValue;\ntype Props = PropsBase & typeof PropsDefault;\n\nexport { defaultValue as ArticleListDatabaseDefaultValue };\nexport type ArticleListDatabaseProps = Props;\n\nconst onClick = (id?: string) => {\n  if (id) {\n    selectedArticlesOnDatabaseVar(xor(selectedArticlesOnDatabaseVar(), [id]));\n  }\n};\n\nconst getArticles = gql`\n  query {\n    articles {\n      id\n      name\n    }\n  }\n`;\n\nexport const ArticleListDatabase: React.FC<PropsBase> = (_props: PropsBase) => {\n  const props = (defaultValue && _props) as Props;\n  const { data } = useQuery<{ articles: ArticleInternal[] }>(getArticles);\n  const options = useReactiveVar(queryForArticleFetchVar);\n  const articleList = useReactiveVar(articlesFetchedVar);\n  const selectedList = useReactiveVar(selectedArticlesOnDatabaseVar);\n  const plotLaunch = useReactiveVar(plotLaunchVar);\n  const plotData = usePlotData(plotLaunch);\n\n  useEffect(() => {\n    const array = Object.values(options).filter((item) => item);\n    if (array.length) {\n      selectedArticlesOnDatabaseVar(\n        intersection(array.reduce((prev, curr) => intersection(prev, curr)))\n      );\n    }\n  }, [options]);\n\n  useEffect(() => {\n    const colorArray = plotData?.data\n      .map((item, index) =>\n        item.data.map((item2: any) => ({ cat: index, id: item2.articleId }))\n      )\n      .flat();\n    if (data) {\n      articlesFetchedVar(\n        [...data.articles]\n          .sort((a, b) => (a.name < b.name ? -1 : 1))\n          .map((item) => ({\n            ...item,\n            color: colorArray?.find((item2) => item2.id === item.id).cat,\n          }))\n      );\n    }\n  }, [data, plotData?.data]);\n\n  return (\n    <Grid width={'100%'} gap={'size-75'} UNSAFE_style={{ textAlign: 'left' }}>\n      {articleList\n        ? articleList.length === 0\n          ? 'no articles'\n          : articleList.map((item) => (\n              <ArticleListItem\n                item={item}\n                type={'database'}\n                onClick={onClick}\n                selected={selectedList.includes(item.id)}\n              />\n            ))\n        : null}\n    </Grid>\n  );\n};\nArticleListDatabase.defaultProps = defaultValue;\n","import { Form, Flex, SearchField } from '@adobe/react-spectrum';\nimport React, { useEffect, useState } from 'react';\nimport { isLoadingVar, queryForArticleSearchVar } from '../../localState';\nimport TextStyle from '@spectrum-icons/workflow/TextStyle';\nimport UserEdit from '@spectrum-icons/workflow/UserEdit';\nimport News from '@spectrum-icons/workflow/News';\nimport Label from '@spectrum-icons/workflow/Label';\n\nexport type ArticleSearchFieldProps = {\n  type: string;\n};\n\nconst getIcon = (type: string) => {\n  switch (type) {\n    case 'title':\n      return <TextStyle />;\n    case 'author':\n      return <UserEdit />;\n    case 'journal':\n      return <News />;\n    case 'tag':\n      return <Label />;\n\n    default:\n      return undefined;\n  }\n};\n\nexport const ArticleSearchField: React.FC<ArticleSearchFieldProps> = (\n  props: ArticleSearchFieldProps\n) => {\n  const [text, setText] = useState('');\n\n  useEffect(() => {\n    if (text === '') {\n      queryForArticleSearchVar({\n        ...queryForArticleSearchVar(),\n        [props.type]: undefined,\n      });\n      return;\n    }\n    const timeout = setTimeout(() => {\n      isLoadingVar({ ...isLoadingVar(), search: true });\n      queryForArticleSearchVar({\n        ...queryForArticleSearchVar(),\n        [props.type]: text,\n      });\n    }, 1000);\n    return () => clearTimeout(timeout);\n  }, [props.type, text]);\n\n  return (\n    <Form width={'100%'}>\n      <Flex\n        alignItems={'end'}\n        justifyContent={'space-between'}\n        columnGap={'size-300'}\n      >\n        <SearchField\n          label={props.type.toUpperCase()}\n          onChange={(e) => {\n            setText(e);\n          }}\n          value={text}\n          width={'100%'}\n          icon={getIcon(props.type)}\n        />\n      </Flex>\n    </Form>\n  );\n};\n","import { Form, Flex, Text } from '@adobe/react-spectrum';\nimport React, { useEffect, useState } from 'react';\nimport {\n  isDarkVar,\n  isLoadingVar,\n  queryForArticleFetchVar,\n  selectedFilterVar,\n} from '../../localState';\nimport UserEdit from '@spectrum-icons/workflow/UserEdit';\nimport News from '@spectrum-icons/workflow/News';\nimport Label from '@spectrum-icons/workflow/Label';\nimport { gql, useQuery, useReactiveVar } from '@apollo/client';\nimport { capitalize } from 'lodash';\nimport Select from 'react-select';\n\nexport type ArticleSearchMenuProps = {\n  type: string;\n};\n\nexport const getItems = (type: string) => gql`\n  query {\n    ${type}(orderBy: {name: asc}) {\n      id\n      name\n      articles{\n        id\n      }\n    }\n  }\n`;\n\nexport const ArticleSearchMenu: React.FC<ArticleSearchMenuProps> = (\n  props: ArticleSearchMenuProps\n) => {\n  const { data } = useQuery(getItems(`${props.type}s`));\n  const selected = useReactiveVar(selectedFilterVar);\n  const [array, setArray] = useState<{ value: string; label: string }[]>([]);\n  const isDark = useReactiveVar(isDarkVar);\n  const [isOpen, setIsOpen] = useState(false);\n\n  useEffect(() => {\n    if (data) {\n      if (isLoadingVar()[`fetchOption${capitalize(props.type)}`]) {\n        isLoadingVar({\n          ...isLoadingVar(),\n          [`fetchOption${capitalize(props.type)}`]: false,\n        });\n      }\n      setArray(\n        data[`${props.type}s`].map((item: any) => ({\n          value: item.id,\n          label: item.name\n            .split(' ')\n            .map((item: string) => capitalize(item))\n            .join(' '),\n        }))\n      );\n    }\n  }, [data, props.type]);\n\n  return (\n    <Form width={'100%'}>\n      <Flex\n        alignItems={'end'}\n        justifyContent={'space-between'}\n        columnGap={'size-300'}\n      >\n        {data ? (\n          <div style={{ width: '100%' }}>\n            <Text>{props.type.toUpperCase()}</Text>\n            <Select\n              value={{\n                label: array.find(\n                  (item) =>\n                    item.value === selected[props.type as keyof typeof selected]\n                )?.label,\n                value: selected[props.type as keyof typeof selected],\n              }}\n              options={array}\n              onChange={(key) => {\n                if (key) {\n                  selectedFilterVar({ ...selected, [props.type]: key.value });\n                  queryForArticleFetchVar({\n                    ...queryForArticleFetchVar(),\n                    [props.type]: data[`${props.type}s`]\n                      .find((item: any) => item.id === key.value)\n                      .articles.map((item: any) => item.id),\n                  });\n                }\n              }}\n              onMenuOpen={() => setIsOpen(true)}\n              onMenuClose={() => setIsOpen(false)}\n              onKeyDown={(event) => {\n                !isOpen && event.code === 'enter' && event.preventDefault();\n              }}\n              theme={(theme) => ({\n                ...theme,\n                colors: isDark\n                  ? {\n                      ...theme.colors,\n                      neutral0: '#282828',\n                      neutral5: '#282828',\n                      neutral10: '#282828',\n                      neutral20: '#777777',\n                      neutral30: '#777777',\n                      neutral70: '#CCCCCC',\n                      neutral80: '#CCCCCC',\n                      neutral90: '#CCCCCC',\n                      primary25: '#2266DD',\n                    }\n                  : theme.colors,\n              })}\n            />\n          </div>\n        ) : (\n          <></>\n        )}\n      </Flex>\n    </Form>\n  );\n};\n","import { Grid } from '@react-spectrum/layout';\nimport React from 'react';\nimport { ArticleSearchField } from '../atoms/ArticleSearchItem';\nimport { ArticleSearchMenu } from '../atoms/ArticleSearchMenu';\n\ntype PropsBase = { full: boolean };\nexport const defaultValue: Required<\n  Pick<PropsBase, { [Key in keyof PropsBase]-?: Key }[keyof PropsBase]>\n> = { full: true };\nconst PropsDefault = defaultValue;\ntype Props = PropsBase & typeof PropsDefault;\n\nexport { defaultValue as ArticleSearchPanelDefaultValue };\nexport type ArticleSearchPanelProps = Props;\n\nexport const ArticleSearchPanel: React.FC<PropsBase> = (_props: PropsBase) => {\n  const props = (defaultValue && _props) as Props;\n  const list = props.full\n    ? ['title', 'author', 'journal', 'tag']\n    : ['author', 'journal', 'tag'];\n\n  return (\n    <Grid>\n      {props.full\n        ? list.map((item) => <ArticleSearchField type={item} />)\n        : list.map((item) => <ArticleSearchMenu type={item} />)}\n    </Grid>\n  );\n};\nArticleSearchPanel.defaultProps = defaultValue;\n","import Send from '@spectrum-icons/workflow/Send';\nimport {\n  Text,\n  Button,\n  Flex,\n  Grid,\n  View,\n  TextField,\n  Slider,\n} from '@adobe/react-spectrum';\nimport React from 'react';\nimport {\n  articlesFetchedVar,\n  isLoadingVar,\n  paramKVar,\n  plotLaunchVar,\n  queryForArticleFetchVar,\n  selectedArticlesOnDatabaseVar,\n  selectedFilterVar,\n} from '../../localState';\nimport Delete from '@spectrum-icons/workflow/Delete';\nimport {\n  FetchResult,\n  gql,\n  MutationFunctionOptions,\n  OperationVariables,\n  useMutation,\n  useReactiveVar,\n} from '@apollo/client';\nimport { differenceBy } from 'lodash';\nimport Erase from '@spectrum-icons/workflow/Erase';\n\nexport type DatabaseFooterProps = {};\n\nconst deleteSelectedArticlesOnDatabase = (\n  mutation: (\n    options?: MutationFunctionOptions<any, OperationVariables> | undefined\n  ) => Promise<FetchResult<any, Record<string, any>, Record<string, any>>>\n) => () => {\n  const array = selectedArticlesOnDatabaseVar();\n  const list = articlesFetchedVar().map((item) => ({\n    ...item,\n    status: array.includes(item.id) ? 'notReady' : undefined,\n  }));\n  articlesFetchedVar(list);\n  mutation({\n    variables: {\n      where: array.map((item) => item.toString()),\n    },\n  }).then(() => {\n    selectedArticlesOnDatabaseVar([]);\n    articlesFetchedVar(\n      differenceBy(\n        list,\n        array.map((item) => ({ id: item })),\n        'id'\n      )\n    );\n  });\n};\n\nconst deleteArticles = gql`\n  mutation DELETE_ARTICLES($where: [String!]) {\n    deleteManyArticle(where: { id: { in: $where } }) {\n      count\n    }\n  }\n`;\n\nexport const DatabaseFooter: React.FC<DatabaseFooterProps> = (\n  props: DatabaseFooterProps\n) => {\n  const [mutation] = useMutation(deleteArticles);\n  const paramK = useReactiveVar(paramKVar);\n\n  return (\n    <Grid gap={'size-200'} columns={['4fr', '6fr']}>\n      <Button\n        alignSelf={'center'}\n        variant={'secondary'}\n        onPressEnd={() => {\n          selectedArticlesOnDatabaseVar([]);\n          selectedFilterVar({});\n          queryForArticleFetchVar({});\n        }}\n      >\n        <Erase />\n        <Text>Clear</Text>\n      </Button>\n      <Slider\n        width={'size-2000'}\n        label=\"k for k-means\"\n        value={paramK}\n        onChange={(value) => paramKVar(value)}\n        minValue={2}\n        maxValue={8}\n      />\n      <Button\n        variant={'secondary'}\n        onPressEnd={deleteSelectedArticlesOnDatabase(mutation)}\n      >\n        <Delete />\n        <Text>Delete</Text>\n      </Button>\n      <Button\n        variant={'cta'}\n        onPressEnd={() => {\n          plotLaunchVar(plotLaunchVar() + 1);\n          isLoadingVar({ ...isLoadingVar(), plot: true });\n        }}\n      >\n        <Send />\n        <Text>Run k-means</Text>\n      </Button>\n    </Grid>\n  );\n};\n","export type ArticleExternal = {\n  Id: string;\n  D: Date;\n  CC: number;\n  DN: string;\n  AA: {\n    AuId: string;\n    DAuN: string;\n  }[];\n  F: {\n    FId: string;\n    DFN: string;\n  }[];\n  FamId: string;\n  J: {\n    JId: string;\n    JN: string;\n  };\n  IA: {\n    IndexLength: number;\n    InvertedIndex: {\n      [key in string]: number[];\n    };\n  };\n};\n\nexport type ArticleInternal = {\n  id: string;\n  date: Date;\n  citation: number;\n  name: string;\n  authors: {\n    id: string;\n    name: string;\n  }[];\n  tags: {\n    id: string;\n    name: string;\n  }[];\n  journal:\n    | {\n        id: string;\n        name: string;\n      }\n    | undefined;\n  abstract: string;\n  abstractEmbedding: number[];\n  status?: string;\n};\n\nexport type ArticleMutation = {\n  id: string;\n  date: string;\n  citation: number;\n  name: string;\n  abstract: string;\n  abstractEmbedding: { set: number[] };\n  authors: {\n    connectOrCreate: {\n      where: {\n        id: string;\n      };\n      create: {\n        id: string;\n        name: string;\n      };\n    }[];\n  };\n  tags: {\n    connectOrCreate: {\n      where: {\n        id: string;\n      };\n      create: {\n        id: string;\n        name: string;\n      };\n    }[];\n  };\n  journal:\n    | {\n        connectOrCreate: {\n          where: {\n            id: string;\n          };\n          create: {\n            id: string;\n            name: string;\n          };\n        };\n      }\n    | undefined;\n};\n\nexport const createAbstract = (invertedAbstract: ArticleExternal['IA']) => {\n  const strArray = new Array<string>(invertedAbstract.IndexLength - 1);\n  Object.entries(invertedAbstract.InvertedIndex).map((item) => {\n    item[1].map((position) => {\n      strArray[position] = item[0];\n    });\n  });\n  return strArray\n    .slice(strArray[0] === 'Abstract' ? 1 : 0)\n    .join(' ')\n    .replace(/\\s+/, ' ');\n};\n","import Axios from 'axios';\nimport {\n  ArticleExternal,\n  ArticleInternal,\n  createAbstract,\n  ArticleMutation,\n} from '../types/Article';\n\nexport const externalToInternalTemporal = (\n  articlesExternal: ArticleExternal[]\n): ArticleInternal[] => {\n  return articlesExternal.map(\n    (item, index): ArticleInternal => {\n      return {\n        id: item.Id.toString(),\n        date: item.D,\n        citation: item.CC,\n        name: item.DN,\n        abstract: createAbstract(item.IA),\n        abstractEmbedding: [],\n        authors: item.AA.map((author) => ({\n          id: author.AuId.toString(),\n          name: author.DAuN,\n        })),\n        tags: item.F.map((tag) => ({\n          id: tag.FId.toString(),\n          name: tag.DFN,\n        })),\n        journal: item.J\n          ? {\n              id: item.J.JId.toString(),\n              name: item.J.JN,\n            }\n          : undefined,\n        status: 'notReady',\n      };\n    }\n  );\n};\n\nexport const internalTemporalToInternalPermanent = async (\n  articlesInternal: ArticleInternal[]\n): Promise<ArticleInternal[]> => {\n  const abstractTextArray = articlesInternal.map((item) => item.abstract);\n  const abstractEmbeddingArray = await createEmbedding(abstractTextArray);\n  return articlesInternal.map((item, index) => ({\n    ...item,\n    abstractEmbedding: abstractEmbeddingArray[index].embedded,\n    status: 'embedded',\n  }));\n};\n\nexport const internalToMutation = (\n  articlesInternal: ArticleInternal[]\n): ArticleMutation[] =>\n  articlesInternal.map((item) => {\n    const converted = {\n      ...item,\n      date: new Date(item.date).toISOString(),\n      abstractEmbedding: {\n        set: item.abstractEmbedding,\n      },\n      journal: item.journal\n        ? {\n            connectOrCreate: {\n              where: {\n                id: item.journal.id,\n              },\n              create: item.journal,\n            },\n          }\n        : undefined,\n      authors: {\n        connectOrCreate: item.authors.map((author) => ({\n          where: {\n            id: author.id,\n          },\n          create: author,\n        })),\n      },\n      tags: {\n        connectOrCreate: item.tags.map((tag) => ({\n          where: {\n            id: tag.id,\n          },\n          create: tag,\n        })),\n      },\n    };\n    delete converted.status;\n    return converted;\n  });\n\nasync function createEmbedding(abstractTextArray: string[]) {\n  return (\n    await Axios.post(\n      process.env.REACT_APP_FUNCTION_URL ||\n        'http://localhost:7071/api/HttpTrigger1',\n      abstractTextArray\n    )\n  ).data;\n}\n","import ArrowUpRight from '@spectrum-icons/workflow/ArrowUpRight';\nimport {\n  Text,\n  Button,\n  Flex,\n  ActionButton,\n  TooltipTrigger,\n  Tooltip,\n} from '@adobe/react-spectrum';\nimport React from 'react';\nimport {\n  FetchResult,\n  gql,\n  MutationFunctionOptions,\n  OperationVariables,\n  useMutation,\n  useReactiveVar,\n} from '@apollo/client';\nimport {\n  articlesFetchedVar,\n  articlesSearchedVar,\n  selectedArticlesOnSearchVar,\n} from '../../localState';\nimport { ArticleExternal } from '../../types/Article';\nimport {\n  internalTemporalToInternalPermanent,\n  externalToInternalTemporal,\n  internalToMutation,\n} from '../../utils';\nimport { unionBy, uniqBy } from 'lodash';\nimport AlertCircle from '@spectrum-icons/workflow/AlertCircle';\n\nexport type SearchFooterProps = {};\n\nconst onClick = (\n  list: ArticleExternal[],\n  selected: string[],\n  mutation: (\n    options?: MutationFunctionOptions<any, OperationVariables> | undefined\n  ) => Promise<FetchResult<any, Record<string, any>, Record<string, any>>>\n) => {\n  return async () => {\n    const filteredArray = list.filter((item) => selected.includes(item.Id));\n    const internalArrayTemporal = externalToInternalTemporal(\n      uniqBy(filteredArray, 'Id')\n    );\n    articlesFetchedVar(\n      unionBy(internalArrayTemporal, articlesFetchedVar(), 'id')\n    );\n    selectedArticlesOnSearchVar([]);\n    const internalArrayPermanent = await internalTemporalToInternalPermanent(\n      internalArrayTemporal\n    );\n    articlesFetchedVar(\n      unionBy(internalArrayPermanent, articlesFetchedVar(), 'id')\n    );\n    const mutationArray = internalToMutation(internalArrayPermanent);\n    for (let i = 0; i < mutationArray.length; i++) {\n      const element = mutationArray[i];\n      mutation({\n        variables: {\n          where: { id: element.id },\n          create: element,\n        },\n      });\n    }\n  };\n};\n\nconst upsertOneArticle = gql`\n  mutation UPSERT_ONE_ARTICLE(\n    $where: ArticleWhereUniqueInput!\n    $create: ArticleCreateInput!\n  ) {\n    upsertOneArticle(where: $where, create: $create, update: {}) {\n      id\n    }\n  }\n`;\n\nexport const SearchFooter: React.FC<SearchFooterProps> = (\n  props: SearchFooterProps\n) => {\n  const list = useReactiveVar(articlesSearchedVar);\n  const selected = useReactiveVar(selectedArticlesOnSearchVar);\n  const [mutation] = useMutation(upsertOneArticle);\n\n  return (\n    <Flex alignItems={'center'} gap={'size-100'}>\n      <TooltipTrigger delay={0}>\n        <ActionButton isQuiet>\n          <AlertCircle />\n        </ActionButton>\n        <Tooltip>\n          Adding articles for the first time in the app may take a while.\n        </Tooltip>\n      </TooltipTrigger>\n      <Button variant={'cta'} onPressEnd={onClick(list, selected, mutation)}>\n        <ArrowUpRight />\n        <Text>Add Articles to the List</Text>\n      </Button>\n    </Flex>\n  );\n};\n","import { View } from '@react-spectrum/view';\nimport React from 'react';\nimport Scrollbar from 'react-scrollbars-custom';\nimport { ArticleListSearch } from '../molecules/ArticleListSearch';\nimport { ArticleListDatabase } from '../molecules/ArticleListDatabase';\nimport { ArticleSearchPanel } from '../molecules/ArticleSearchPanel';\nimport { Flex } from '@react-spectrum/layout';\nimport { DatabaseFooter } from '../molecules/DatabaseFooter';\nimport { Divider } from '@react-spectrum/divider';\nimport { SearchFooter } from '../molecules/SearchFooter';\nimport { Heading } from '@react-spectrum/text';\nimport { LoadedScreen } from '../molecules/LoadedScreen';\nimport { useReactiveVar } from '@apollo/client';\nimport { isLoadingVar } from '../../localState';\n\ntype PropsBase = { type?: 'search' | 'database' | null };\nexport const defaultValue: Required<\n  Pick<PropsBase, { [Key in keyof PropsBase]-?: Key }[keyof PropsBase]>\n> = { type: null };\nconst PropsDefault = defaultValue;\ntype Props = PropsBase & typeof PropsDefault;\n\nexport { defaultValue as SidebarDefaultValue };\nexport type SidebarProps = Props;\n\nexport const Sidebar: React.FC<PropsBase> = (_props: PropsBase) => {\n  const props = (defaultValue && _props) as Props;\n  const isLoading = useReactiveVar(isLoadingVar)['search'];\n\n  if (!props.type) return null;\n  return (\n    <Flex direction={'column'} rowGap={'size-150'}>\n      {props.type === 'search' ? (\n        <Heading level={2} margin={'size-0'}>\n          Search Articles\n        </Heading>\n      ) : (\n        <Heading level={2} margin={'size-0'}>\n          Fetch Database\n        </Heading>\n      )}\n      <Divider size={'S'} />\n      <View marginBottom={'size-200'}>\n        <ArticleSearchPanel full={props.type === 'search'} />\n      </View>\n      <Divider size={'S'} />\n      {props.type === 'search' ? (\n        <>\n          <LoadedScreen loading={isLoading}>\n            <Scrollbar>\n              <ArticleListSearch />\n            </Scrollbar>\n          </LoadedScreen>\n          <Divider size={'S'} />\n          <View alignSelf={'flex-end'}>\n            <SearchFooter />\n          </View>\n        </>\n      ) : (\n        <>\n          <Scrollbar>\n            <ArticleListDatabase />\n          </Scrollbar>\n          <Divider size={'S'} />\n          <View alignSelf={'flex-end'}>\n            <DatabaseFooter />\n          </View>\n        </>\n      )}\n    </Flex>\n  );\n};\nSidebar.defaultProps = defaultValue;\n","import React, { useEffect } from 'react';\nimport { ArticleDetails } from '../organisms/ArticleDetails';\nimport { Sidebar } from '../organisms/Sidebar';\nimport { PlotArea } from '../organisms/PlotArea';\nimport { LoadedScreen } from '../molecules/LoadedScreen';\nimport { useReactiveVar } from '@apollo/client';\nimport { isDarkVar, isLoadingVar } from '../../localState';\nimport { useWindowSize } from 'react-use';\nimport Scrollbar from 'react-scrollbars-custom';\nimport {\n  ActionButton,\n  Divider,\n  Flex,\n  Grid,\n  Heading,\n  Image,\n  minmax,\n  Switch,\n  View,\n} from '@adobe/react-spectrum';\nimport Light from '@spectrum-icons/workflow/Light';\nimport Moon from '@spectrum-icons/workflow/Moon';\nimport logo from '../../images/github.png';\n\nexport type IndexProps = {};\n\nexport const IndexTemplate: React.FC<IndexProps> = (props: IndexProps) => {\n  const windowSize = useWindowSize();\n  const isLoading = useReactiveVar(isLoadingVar);\n\n  useEffect(() => {\n    if (\n      isLoading['main'] &&\n      !isLoading['articleListDatabase'] &&\n      !isLoading['fetchOptionAuthor'] &&\n      !isLoading['fetchOptionJournal'] &&\n      !isLoading['fetchOptionTag']\n    ) {\n      isLoadingVar({ ...isLoadingVar(), main: false });\n    }\n  }, [isLoading]);\n\n  return (\n    <LoadedScreen loading={isLoading['main']}>\n      <Grid\n        areas={[\n          'header header header header header',\n          'sidebar1 divider1 sidebar2 divider2 main',\n        ]}\n        columns={['20rem', '0.25rem', '20rem', '0.25rem', 'auto']}\n        rows={['4rem', 'auto']}\n        height={windowSize.height}\n        width={windowSize.width}\n      >\n        <Grid gridArea={'header'} height={'4rem'}>\n          <View backgroundColor={'gray-400'}>\n            <Flex\n              justifyContent={'space-between'}\n              alignContent={'center'}\n              height={'4rem'}\n            >\n              <Heading level={3} marginStart={'size-200'}>\n                IevA - Interactive exploration and visualization tool of\n                academic Articles\n              </Heading>\n              <Grid alignItems={'center'} columns={['size-1000', 'size-600']}>\n                <Flex alignItems={'center'}>\n                  <Light size={'S'} />\n                  <Switch\n                    margin={'size-75'}\n                    onChange={(isSelected) => {\n                      if (isSelected) {\n                        isDarkVar(true);\n                      } else {\n                        isDarkVar(false);\n                      }\n                    }}\n                  />\n                  <Moon size={'S'} />\n                </Flex>\n                <ActionButton\n                  isQuiet\n                  UNSAFE_style={{ cursor: 'pointer' }}\n                  onPressEnd={() =>\n                    window.open(\n                      'https://github.com/keita-makino/sta220-2021-f',\n                      '_blank'\n                    )\n                  }\n                >\n                  <Image\n                    alt={'GitHub'}\n                    src={logo}\n                    height={'2rem'}\n                    width={'2rem'}\n                    UNSAFE_style={{ opacity: 0.6 }}\n                  />\n                </ActionButton>\n              </Grid>\n            </Flex>\n          </View>\n        </Grid>\n        <Grid\n          gridArea={'sidebar1'}\n          margin={'1rem'}\n          UNSAFE_style={{ overflow: 'hidden' }}\n        >\n          <Sidebar type={'search'} />\n        </Grid>\n        <Grid gridArea={'divider1'}>\n          <Divider orientation={'vertical'} size={'M'} />\n        </Grid>\n        <Grid\n          gridArea={'sidebar2'}\n          margin={'1rem'}\n          UNSAFE_style={{ overflow: 'hidden' }}\n        >\n          <Sidebar type={'database'} />\n        </Grid>\n        <Grid gridArea={'divider2'}>\n          <Divider orientation={'vertical'} size={'M'} />\n        </Grid>\n        <Scrollbar>\n          <Grid\n            gridArea={'main'}\n            margin={'1rem'}\n            alignContent={'start'}\n            areas={['details', 'divider', 'plot']}\n            rows={[\n              minmax('size-4600', '40vh'),\n              'auto',\n              minmax('36rem', '48vh'),\n            ]}\n            alignItems={'stretch'}\n          >\n            <ArticleDetails />\n            <Divider size={'M'} />\n            <PlotArea />\n          </Grid>\n        </Scrollbar>\n      </Grid>\n    </LoadedScreen>\n  );\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyRTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyRjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJDOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJEOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FYrpWAAABrNJREFUeNrkW2ls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\"","import React from 'react';\nimport { IndexTemplate } from '../components/templates/Index';\n\nexport type IndexProps = {};\n\nexport const Index: React.FC<IndexProps> = (props: IndexProps) => {\n  return <IndexTemplate></IndexTemplate>;\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}